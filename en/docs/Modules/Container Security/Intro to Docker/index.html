<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Modules/Container Security/Intro to Docker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Intro to Docker | TryHackMe-CN</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Intro to Docker | TryHackMe-CN"><meta data-rh="true" name="description" content="Task 1 Introduction"><meta data-rh="true" property="og:description" content="Task 1 Introduction"><link data-rh="true" rel="icon" href="/TryHackMe-CN/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker"><link data-rh="true" rel="alternate" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker" hreflang="en"><link data-rh="true" rel="alternate" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/docs/Modules/Container Security/Intro to Docker" hreflang="zh"><link data-rh="true" rel="alternate" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/docs/Modules/Container Security/Intro to Docker" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Modules","item":"https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/"},{"@type":"ListItem","position":2,"name":"Container Security","item":"https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/"},{"@type":"ListItem","position":3,"name":"Intro to Docker","item":"https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker"}]}</script><link rel="alternate" type="application/rss+xml" href="/TryHackMe-CN/en/blog/rss.xml" title="TryHackMe-CN RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/TryHackMe-CN/en/blog/atom.xml" title="TryHackMe-CN Atom Feed"><link rel="stylesheet" href="/TryHackMe-CN/en/assets/css/styles.6c4c8a38.css">
<script src="/TryHackMe-CN/en/assets/js/runtime~main.e8036b43.js" defer="defer"></script>
<script src="/TryHackMe-CN/en/assets/js/main.72a18b18.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/TryHackMe-CN/en/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TryHackMe-CN/en/"><div class="navbar__logo"><img src="/TryHackMe-CN/en/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/TryHackMe-CN/en/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TryHackMe-CN</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/TryHackMe-CN/en/docs/Modules/">Tutorial</a><a class="navbar__item navbar__link" href="/TryHackMe-CN/en/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/TryHackMe-CN/docs/Modules/Container Security/Intro to Docker" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/TryHackMyOffsecBox/TryHackMe-CN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/TryHackMe-CN/en/docs/Modules/"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Collapse sidebar category &#x27;Modules&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Attacking LLMs/"><span title="Attacking LLMs" class="categoryLinkLabel_W154">Attacking LLMs</span></a><button aria-label="Expand sidebar category &#x27;Attacking LLMs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Command Line/"><span title="Command Line" class="categoryLinkLabel_W154">Command Line</span></a><button aria-label="Expand sidebar category &#x27;Command Line&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/"><span title="Container Security" class="categoryLinkLabel_W154">Container Security</span></a><button aria-label="Collapse sidebar category &#x27;Container Security&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Containerisation"><span title="Intro to Containerisation" class="linkLabel_WmDU">Intro to Containerisation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker"><span title="Intro to Docker" class="linkLabel_WmDU">Intro to Docker</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes"><span title="Intro to Kubernetes" class="linkLabel_WmDU">Intro to Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Container Vulnerabilities"><span title="Container Vulnerabilities" class="linkLabel_WmDU">Container Vulnerabilities</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Container Hardening"><span title="Container Hardening" class="linkLabel_WmDU">Container Hardening</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Host Evasions/"><span title="Host Evasions" class="categoryLinkLabel_W154">Host Evasions</span></a><button aria-label="Expand sidebar category &#x27;Host Evasions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Memory Analysis/"><span title="Memory Analysis" class="categoryLinkLabel_W154">Memory Analysis</span></a><button aria-label="Expand sidebar category &#x27;Memory Analysis&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Microsoft Defender XDR/"><span title="Microsoft Defender XDR" class="categoryLinkLabel_W154">Microsoft Defender XDR</span></a><button aria-label="Expand sidebar category &#x27;Microsoft Defender XDR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Starters/"><span title="Starters" class="categoryLinkLabel_W154">Starters</span></a><button aria-label="Expand sidebar category &#x27;Starters&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/TryHackMe-CN/en/docs/Networks/"><span title="Networks" class="categoryLinkLabel_W154">Networks</span></a><button aria-label="Expand sidebar category &#x27;Networks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TryHackMe-CN/en/docs/"><span title="index" class="linkLabel_WmDU">index</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/TryHackMe-CN/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/TryHackMe-CN/en/docs/Modules/"><span>Modules</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/TryHackMe-CN/en/docs/Modules/Container Security/"><span>Container Security</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Intro to Docker</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Intro to Docker</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-1-introduction">Task 1 Introduction<a href="#task-1-introduction" class="hash-link" aria-label="Direct link to Task 1 Introduction" title="Direct link to Task 1 Introduction" translate="no">​</a></h2>
<p>In this room, you’ll get your first hands-on experience deploying and interacting with Docker containers.</p>
<p>Namely, by the end of the room, you will be familiar with the following:</p>
<ul>
<li class="">The basic syntax to get you started with Docker</li>
<li class="">Running and deploying your first container</li>
<li class="">Understanding how Docker containers are distributed using images</li>
<li class="">Creating your own image using a Dockerfile</li>
<li class="">How Dockerfiles are used to build containers, using Docker Compose to orchestrate multiple containers</li>
<li class="">Applying the knowledge gained from the room into the practical element at the end.</li>
</ul>
<p><strong>Please note</strong>: It is strongly recommended that you are at least familiar with basic Linux syntax (such as running commands, moving files and familiarity with how the filesystem structure looks). If you have completed the <a href="https://tryhackme.com/module/linux-fundamentals" target="_blank" rel="noopener noreferrer" class="">Linux Fundamentals Module</a> - you will be all set for this room!</p>
<p>Additionally, it is important to remember that you will need internet connectivity to pull Docker images.  If you are a free user and wish to practice the commands in this room, you will need to do this in your own environment.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Complete this question before progressing to the next task. </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">No answer needed</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-2-basic-docker-syntax">Task 2 Basic Docker Syntax<a href="#task-2-basic-docker-syntax" class="hash-link" aria-label="Direct link to Task 2 Basic Docker Syntax" title="Direct link to Task 2 Basic Docker Syntax" translate="no">​</a></h2>
<p>Docker can seem overwhelming at first. However, the commands are pretty intuitive, and with a bit of practice, you’ll be a Docker wizard in no time.</p>
<p>The syntax for Docker can be categorised into four main groups:</p>
<ul>
<li class="">Running a container</li>
<li class="">Managing &amp; Inspecting containers</li>
<li class="">Managing Docker images</li>
<li class="">Docker daemon stats and information</li>
</ul>
<p>We will break down each of these categories in this task.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="managing-docker-images">Managing Docker Images<a href="#managing-docker-images" class="hash-link" aria-label="Direct link to Managing Docker Images" title="Direct link to Managing Docker Images" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-pull">Docker Pull<a href="#docker-pull" class="hash-link" aria-label="Direct link to Docker Pull" title="Direct link to Docker Pull" translate="no">​</a></h4>
<p>Before we can run a Docker container, we will first need an image. Recall from the “<a href="https://tryhackme.com/room/introtocontainerisation" target="_blank" rel="noopener noreferrer" class="">Intro to Containerisation</a>” room that images are instructions for what a container should execute. There’s no use running a container that does nothing!</p>
<p>In this room, we will use the Nginx image to run a web server within a container. Before downloading the image, let’s break down the commands and syntax required to download an image. Images can be downloaded using the <code>docker pull</code> command and providing the name of the image.</p>
<p>For example, <code>docker pull nginx</code>. Docker must know where to get this image (such as from a repository which we’ll come onto in a later task).</p>
<p>Continuing with our example above, let’s download this Nginx image!</p>
<p><strong>Please note</strong>, this command will not work on the practical machine attached to this room as internet access is required.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing the downloading of the </div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Using default tag: latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">latest: Pulling from library/nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- omitted </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> brevity --</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Downloaded newer image </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> nginx:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p>By running this command, we are downloading the latest version of the image titled “nginx”. Images have these labels called tags. These tags are used to refer to variations of an image. For example, an image can have the same name but different tags to indicate a different version. I’ve provided an example of how tags are used within the table below:</p>
<table><thead><tr><th style="text-align:center">Docker Image</th><th style="text-align:center">Tag</th><th style="text-align:center">Command Example</th><th style="text-align:center">Explanation</th></tr></thead><tbody><tr><td style="text-align:center">ubuntu</td><td style="text-align:center">latest</td><td style="text-align:center">docker pull ubuntu <br> <strong>- IS THE SAME AS -</strong> <br> docker pull ubuntu<!-- -->:latest</td><td style="text-align:center">This command will pull the latest version of the &quot;ubuntu&quot; image. If no tag is specified, Docker will assume you want the &quot;latest&quot; version if no tag is specified.<br>It is worth remembering that you do not always want the &quot;latest&quot;. This image is quite literally the &quot;latest&quot; in the sense it will have the most recent changes. This could either fix or break your container.</td></tr><tr><td style="text-align:center">ubuntu</td><td style="text-align:center">22.04</td><td style="text-align:center">docker pull ubuntu:22.04</td><td style="text-align:center">This command will pull version &quot;22.04 (Jammy)&quot; of the &quot;ubuntu&quot; image.</td></tr><tr><td style="text-align:center">ubuntu</td><td style="text-align:center">20.04</td><td style="text-align:center">docker pull ubuntu:20.04</td><td style="text-align:center">This command will pull version &quot;20.04 (Focal)&quot; of the &quot;ubuntu&quot; image.</td></tr><tr><td style="text-align:center">ubuntu</td><td style="text-align:center">18.04</td><td style="text-align:center">docker pull ubuntu:18.04</td><td style="text-align:center">This command will pull version &quot;18.04 (Bionic)&quot; of the &quot;ubuntu&quot; image.</td></tr></tbody></table>
<p>When specifying a tag, you must include a colon <code>:</code> between the image name and tag, for example, <code>ubuntu:22.04</code> (image<!-- -->:tag<!-- -->). Don’t forget about tags - we will return to these in a future task!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-image-xyz">Docker Image x/y/z<a href="#docker-image-xyz" class="hash-link" aria-label="Direct link to Docker Image x/y/z" title="Direct link to Docker Image x/y/z" translate="no">​</a></h3>
<p>The <code>docker image</code> command, with the appropriate option, allows us to manage the images on our local system. To list the available options, we can simply do <code>docker image</code> to see what we can do. I’ve done this for you in the terminal below:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing the various arguments we can provide with [docker image]</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage:  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Manage images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build       Build an image from a Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">history</span><span class="token plain">     Show the </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> of an image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">import</span><span class="token plain">      Import the contents from a tarball to create a filesystem image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inspect     Display detailed information on one or </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  load        Load an image from a </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> archive or STDIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain">          List images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prune       Remove unused images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pull        Pull an image or a repository from a registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  push        Push an image or a repository to a registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain">          Remove one or </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  save        Save one or </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> images to a </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> archive </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">streamed to STDOUT by default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run </span><span class="token string" style="color:#e3116c">&#x27;docker image COMMAND --help&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> information on a command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p>In this room, we are only going to cover the following options for docker images:</p>
<ul>
<li class="">pull (we have done this above!)</li>
<li class="">ls (list images)</li>
<li class="">rm (remove an image)</li>
<li class="">build (we will come onto this in the “Building your First Container” task)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-image-ls">Docker Image ls<a href="#docker-image-ls" class="hash-link" aria-label="Direct link to Docker Image ls" title="Direct link to Docker Image ls" translate="no">​</a></h3>
<p>This command allows us to list all images stored on the local system. We can use this command to verify if an image has been downloaded correctly and to view a little bit more information about it (such as the tag, when the image was created and the size of the image).</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal listing the Docker images that are stored on the host operating system</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ubuntu       </span><span class="token number" style="color:#36acaa">22.04</span><span class="token plain">     2dc39ba059dc   </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> days ago   </span><span class="token number" style="color:#36acaa">77</span><span class="token plain">.8MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nginx        latest    2b7d6430f78d   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> weeks ago   142MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p>For example, in the terminal above, we can see some information for two images on the system:</p>
<table><thead><tr><th style="text-align:center">Repository</th><th style="text-align:center">Tag</th><th style="text-align:center">Image ID</th><th style="text-align:center">Created</th><th style="text-align:center">Size</th></tr></thead><tbody><tr><td style="text-align:center">ubuntu</td><td style="text-align:center">22.04</td><td style="text-align:center">2dc39ba059dc</td><td style="text-align:center">10 days ago</td><td style="text-align:center">77.8MB</td></tr><tr><td style="text-align:center">nginx</td><td style="text-align:center">latest</td><td style="text-align:center">2b7d6430f78d</td><td style="text-align:center">2 weeks ago</td><td style="text-align:center">142MB</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-image-rm">Docker Image rm<a href="#docker-image-rm" class="hash-link" aria-label="Direct link to Docker Image rm" title="Direct link to Docker Image rm" translate="no">​</a></h3>
<p>If we want to remove an image from the system, we can use <code>docker image rm</code> along with the name (or Image ID). In the following example, I will remove the &quot;ubuntu&quot; image with the tag &quot;22.04&quot;. My command will be <code>docker image rm ubuntu:22.04</code>:</p>
<p>It is important to remember to include the tag with the image name.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal displaying the untagging of an image</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> ubuntu:22.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Untagged: ubuntu:22.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Untagged: ubuntu@sha256:20fa2d7bb4de7723f542be5923b06c4d704370f0390e4ae9e1c833c8785644c1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deleted: sha256:2dc39ba059dcd42ade30aae30147b5692777ba9ff0779a62ad93a74de02e3e1f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deleted: sha256:7f5cbd8cc787c8d628630756bcc7240e6c96b876c2882e6fc980a8b60cdfa274</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p>If we were to run a <code>docker image ls</code>, we would see that the image is no longer listed:</p>
<div class="language-SHELL language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nginx        latest    2b7d6430f78d   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> weeks ago   142MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> If we wanted to <code>pull</code> a docker image, what would our command look like? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> If we wanted to list all images on a device running Docker, what would our command look like? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker image ls</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Let&#x27;s say we wanted to pull the image &quot;tryhackme&quot; (no quotations); what would our command look like? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull tryhackme</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Let&#x27;s say we wanted to pull the image &quot;tryhackme&quot; with the tag &quot;1337&quot; (no quotations). What would our command look like? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull tryhackme:1337</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-3-running-your-first-container">Task 3 Running Your First Container<a href="#task-3-running-your-first-container" class="hash-link" aria-label="Direct link to Task 3 Running Your First Container" title="Direct link to Task 3 Running Your First Container" translate="no">​</a></h2>
<p>The Docker run command creates running containers from images. This is where commands from the Dockerfile (as well as our own input at runtime) are run. Because of this, it must be some of the first syntaxes you learn.</p>
<p>The command works in the following way: <code>docker run [OPTIONS] IMAGE_NAME [COMMAND] [ARGUMENTS...]</code> the options enclosed in brackets are not required for a container to run.</p>
<p>Docker containers can be run with various options - depending on how we will use the container. This task will explain some of the most common options that you may want to use.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="first-simply-running-a-container">First, Simply Running a Container<a href="#first-simply-running-a-container" class="hash-link" aria-label="Direct link to First, Simply Running a Container" title="Direct link to First, Simply Running a Container" translate="no">​</a></h3>
<p>Let&#x27;s recall the syntax required to run a Docker container: <code>docker run [OPTIONS] IMAGE_NAME [COMMAND] [ARGUMENTS...]</code> . In this example, I am going to configure the container to run:</p>
<ul>
<li class="">An image named &quot;helloworld&quot;</li>
<li class="">&quot;Interactively&quot; by providing the <code>-it</code> switch in the [OPTIONS] command. This will allow us to interact with the container directly.</li>
<li class="">I am going to spawn a shell within the container by providing <code>/bin/bash</code> as the [COMMAND] part. This argument is where you will place what commands you want to run within the container (such as a file, application or shell!)</li>
</ul>
<p>So, to achieve the above, my command will look like the following: <code>docker run -it helloworld /bin/bash</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing a container being launched in &#x27;interactive&#x27; mode</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm-intro-to-docker:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> helloworld /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@30eff5ed7492:/</span><span class="token comment" style="color:#999988;font-style:italic">#</span><br></span></code></pre></div></div>
<p>We can verify that we have successfully launched a shell because our prompt will change to another user account and hostname. The hostname of a container is the container ID (which can be found by using <code>docker ps</code>). For example, in the terminal above, our username and hostname are <code>root@30eff5ed7492</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="running-containerscontinued">Running Containers...Continued<a href="#running-containerscontinued" class="hash-link" aria-label="Direct link to Running Containers...Continued" title="Direct link to Running Containers...Continued" translate="no">​</a></h3>
<p>As previously mentioned, Docker containers can be run with various options. The purpose of the container and the instructions set in a Dockerfile (we&#x27;ll come onto this in a later task) determines what options we need to run the container with. To start, I&#x27;ve put some of the most common options you may need to run your Docker container into the table below.</p>
<table><thead><tr><th style="text-align:center">[OPTION]</th><th style="text-align:center">Explanation</th><th style="text-align:center">Relevant Dockerfile Instruction</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">-d</td><td style="text-align:center">This argument tells the container to start in &quot;detached&quot; mode. This means that the container will run in the background.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run -d helloworld</code></td></tr><tr><td style="text-align:center">-it</td><td style="text-align:center">This argument has two parts. The &quot;i&quot; means run interactively, and &quot;t&quot; tells Docker to run a shell within the container. We would use this option if we wish to interact with the container directly once it runs.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run -it helloworld</code></td></tr><tr><td style="text-align:center">-v</td><td style="text-align:center">This argument is short for &quot;Volume&quot; and tells Docker to mount a directory or file from the host operating system to a location within the container. The location these files get stored is defined in the Dockerfile</td><td style="text-align:center">VOLUME</td><td style="text-align:center"><code>docker run -v /host/os/directory:/container/directory helloworld</code></td></tr><tr><td style="text-align:center">-p</td><td style="text-align:center">This argument tells Docker to bind a port on the host operating system to a port that is being exposed in the container. You would use this instruction if you are running an application or service (such as a web server) in the container and wish to access the application/service by navigating to the IP address.</td><td style="text-align:center">EXPOSE</td><td style="text-align:center"><code>docker run -p 80:80 webserver</code></td></tr><tr><td style="text-align:center">--rm</td><td style="text-align:center">This argument tells Docker to remove the container once the container finishes running whatever it has been instructed to do.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run --rm helloworld</code></td></tr><tr><td style="text-align:center">--name</td><td style="text-align:center">This argument lets us give a friendly, memorable name to the container. When a container is run without this option, the name is two random words. We can use this open to name a container after the application the container is running.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run --name helloworld</code></td></tr></tbody></table>
<p>These are just some arguments we can provide when running a container. Again, most arguments we need to run will be determined by how the container is built. However, arguments such as <code>--rm</code> and <code>--name</code> will instruct Docker on how to run the container. Other arguments include (but are not limited to!):</p>
<ul>
<li class="">Telling Docker what network adapter the container should use</li>
<li class="">What capabilities the container should have access to. This is covered in the &quot;<a href="https://tryhackme.com/room/dockerrodeo" target="_blank" rel="noopener noreferrer" class="">Docker Rodeo</a>&quot; room on TryHackMe.</li>
<li class="">Storing a value into an environment variable</li>
</ul>
<p>If you wish to explore more of these arguments, I highly suggest reading the <a href="https://docs.docker.com/engine/reference/run/" target="_blank" rel="noopener noreferrer" class="">Docker run documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="listing-running-containers">Listing Running Containers<a href="#listing-running-containers" class="hash-link" aria-label="Direct link to Listing Running Containers" title="Direct link to Listing Running Containers" translate="no">​</a></h3>
<p>To list running containers, we can use the docker ps command. This command will list containers that are currently running - like so:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing a list of running containers and their information</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~/intro-to-docker$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER ID   IMAGE                           COMMAND        CREATED        STATUS      PORTS     NAMES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a913a8f6e30f   cmnatic/helloworld:latest   </span><span class="token string" style="color:#e3116c">&quot;sleep&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> months ago   Up </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> days   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8000-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8000</span><span class="token plain">/tcp   helloworld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~/intro-to-docker$</span><br></span></code></pre></div></div>
<p>This command will also show information about the container, including:</p>
<ul>
<li class="">The container&#x27;s ID</li>
<li class="">What command is the container running</li>
<li class="">When was the container created</li>
<li class="">How long has the container been running</li>
<li class="">What ports are mapped</li>
<li class="">The name of the container</li>
</ul>
<p><strong>Tip</strong>: To list all containers (even stopped), you can use <code>docker ps -a</code>:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing a list of ALL containers and their information</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~/intro-to-docker$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER ID   IMAGE                             COMMAND                  CREATED             STATUS     PORTS    NAMES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00ba1eed0826   gobuster:cmnatic                  </span><span class="token string" style="color:#e3116c">&quot;./gobuster dir -url…&quot;</span><span class="token plain">   an hour ago   Exited an hour ago practical_khayyam</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What would our command look like if we wanted to run a container <strong>interactively</strong>?<br><strong>Note</strong>: Assume we are not specifying any image here. </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -it</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What would our command look like if we wanted to run a container in &quot;<strong>detached</strong>&quot; mode?<br><strong>Note</strong>: Assume we are not specifying any image here. </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Let&#x27;s say we want to run a container that will run <strong>and</strong> bind a webserver on port 80. What would our command look like?<br><strong>Note</strong>: Assume we are not specifying any image here. </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -p 80:80</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> How would we list all running containers? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker ps</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Now, how would we list all containers (including stopped)? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker ps -a</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-4-intro-to-dockerfiles">Task 4 Intro to Dockerfiles<a href="#task-4-intro-to-dockerfiles" class="hash-link" aria-label="Direct link to Task 4 Intro to Dockerfiles" title="Direct link to Task 4 Intro to Dockerfiles" translate="no">​</a></h2>
<p>Dockerfiles play an essential role in Docker. Dockerfiles is a formatted text file which essentially serves as an instruction manual for what containers should do and ultimately assembles a Docker image.</p>
<p>You use Dockerfiles to contain the commands the container should execute when it is built. To get started with Dockerfiles, we need to know some basic syntax and instructions. Dockerfiles are formatted in the following way:</p>
<p><code>INSTRUCTION argument</code></p>
<p>First, let’s cover some essential instructions:</p>
<table><thead><tr><th style="text-align:center">Instruction</th><th style="text-align:center">Description</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">FROM</td><td style="text-align:center">This instruction sets a build stage for the container as well as setting the base image (operating system). All Dockerfiles must start with this.</td><td style="text-align:center"><code>FROM ubuntu</code></td></tr><tr><td style="text-align:center">RUN</td><td style="text-align:center">This instruction will execute commands in the container within a new layer.</td><td style="text-align:center"><code>RUN whoami</code></td></tr><tr><td style="text-align:center">COPY</td><td style="text-align:center">This instruction copies files from the local system to the working directory in the container (the syntax is similar to the cp command).</td><td style="text-align:center"><code>COPY /home/cmnatic/myfolder/app/</code></td></tr><tr><td style="text-align:center">WORKDIR</td><td style="text-align:center">This instruction sets the working directory of the container. (similar to using cd on Linux).</td><td style="text-align:center"><code>WORKDIR /</code> <br>(sets to the root of the filesystem in the container)</td></tr><tr><td style="text-align:center">CMD</td><td style="text-align:center">This instruction determines what command is run when the container starts (you would use this to start a service or application).</td><td style="text-align:center"><code>CMD /bin/sh -c script.sh</code></td></tr><tr><td style="text-align:center">EXPOSE</td><td style="text-align:center">This instruction is used to tell the person who runs the container what port they should publish when running the container.</td><td style="text-align:center"><code>EXPOSE 80</code> <br>(tells the person running the container to publish to port 80 i.e. docker run -p 80:80)</td></tr></tbody></table>
<p>Now that we understand the core instructions that make up a Dockerfile, let’s see a working example of a Dockerfile. But first, I’ll explain what I want the container to do:</p>
<ol>
<li class="">Use the “Ubuntu” (version 22.04) operating system as the base.</li>
<li class="">Set the working directory to be the root of the container.</li>
<li class="">Create the text file “helloworld.txt”.</li>
</ol>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># THIS IS A COMMENT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use Ubuntu 22.04 as the base operating system of the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu:22.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the working directory to the root of the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> / </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create helloworld.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> touch helloworld.txt</span><br></span></code></pre></div></div>
<p>Remember, the commands that you can run via the <code>RUN</code> instruction will depend on the operating system you use in the <code>FROM</code> instruction. (In this example, I have chosen Ubuntu. It’s important to remember that the operating systems used in containers are usually very minimal. I.e., don’t expect a command to be there from the start (even commands like curl, ping, etc., may need to be installed.)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="building-your-first-container">Building Your First Container<a href="#building-your-first-container" class="hash-link" aria-label="Direct link to Building Your First Container" title="Direct link to Building Your First Container" translate="no">​</a></h3>
<p>Once we have a Dockerfile, we can create an image using the <code>docker build</code> command. This command requires a few pieces of information:</p>
<ol>
<li class="">Whether or not you want to name the image yourself (we will use the <code>-t</code> (tag) argument).</li>
<li class="">The name that you are going to give the image.</li>
<li class="">The location of the Dockerfile you wish to build with.</li>
</ol>
<p>I’ll provide the scenario and then explain the relevant command. Let’s say we want to build an image - let’s fill in the two required pieces of information listed above:</p>
<ol>
<li class="">We are going to name it ourselves, so we are going to use the <code>-t</code> argument.</li>
<li class="">We want to name the image.</li>
<li class="">The Dockerfile is located in our current working directory (<code>.</code>).</li>
</ol>
<p>The Dockerfile we are going to build is the following:</p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use Ubuntu 22.04 as the base operating system of the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu:22.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the working directory to the root of the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> / </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create helloworld.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> touch helloworld.txt</span><br></span></code></pre></div></div>
<p>The command would look like so: <code>docker build -t helloworld .</code> (we are using the dot to tell Docker to look in our working directory). If we have filled out the command right, we will see Docker starting to build the image:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing the building process of the </div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> helloworld </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sending build context to Docker daemon  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.778MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/3 </span><span class="token builtin class-name">:</span><span class="token plain"> FROM ubuntu:22.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">22.04</span><span class="token plain">: Pulling from library/ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2b55860d4c66: Pull complete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Digest: sha256:20fa2d7bb4de7723f542be5923b06c4d704370f0390e4ae9e1c833c8785644c1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Downloaded newer image </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> ubuntu:22.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 2dc39ba059dc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/3 </span><span class="token builtin class-name">:</span><span class="token plain"> WORKDIR /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Running </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 64d497097f8a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Removing intermediate container 64d497097f8a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> d6bd1253fd4e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">/3 </span><span class="token builtin class-name">:</span><span class="token plain"> RUN </span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> helloworld.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Running </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 54e94c9774be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Removing intermediate container 54e94c9774be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 4b11fc80fdd5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully built 4b11fc80fdd5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully tagged helloworld:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p>Great! That looks like a success. Let’s use <code>docker image ls</code> to now see if this image has been built:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Using the </div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helloworld   latest    4b11fc80fdd5   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> minutes ago   </span><span class="token number" style="color:#36acaa">77</span><span class="token plain">.8MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ubuntu       </span><span class="token number" style="color:#36acaa">22.04</span><span class="token plain">     2dc39ba059dc   </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> days ago     </span><span class="token number" style="color:#36acaa">77</span><span class="token plain">.8MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p>Note: Whatever base operating system you list in the <code>FROM</code> instruction in the Dockerfile will also be downloaded. This is why we can see two images:</p>
<ol>
<li class="">helloworld (our image).</li>
<li class="">ubuntu (the base operating system used in our image).</li>
</ol>
<p>You will now be able to use this image in a container. Refer to the “Running Your First Container” task to remind you how to start a container.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="levelling-up-our-dockerfile">Levelling up Our Dockerfile<a href="#levelling-up-our-dockerfile" class="hash-link" aria-label="Direct link to Levelling up Our Dockerfile" title="Direct link to Levelling up Our Dockerfile" translate="no">​</a></h3>
<p>Let’s level up our Dockerfile. So far, our container will only create a file - that’s not very useful! In the following Dockerfile, I am going to:</p>
<ol>
<li class="">Use Ubuntu 22.04 as the base operating system for the container.</li>
<li class="">Install the “apache2” web server.</li>
<li class="">Add some networking. As this is a web server, we will need to be able to connect to the container over the network somehow. I will achieve this by using the <code>EXPOSE</code> instruction and telling the container to expose port 80.</li>
<li class="">Tell the container to start the “apache2” service at startup. Containers do not have service managers like <code>systemd</code> (this is by design - it is bad practice to run multiple applications in the same container. For example, this container is for the apache2 web server - and the apache2 web server only).</li>
</ol>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># THIS IS A COMMENT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu:22.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update the APT repository to ensure we get the latest version of apache2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get update -y </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install apache2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get install apache2 -y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Tell the container to expose port 80 to allow us to connect to the web server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">EXPOSE</span><span class="token instruction"> 80 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Tell the container to run the apache2 service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;apache2ctl&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;-D&quot;</span><span class="token instruction">,</span><span class="token instruction string" style="color:#e3116c">&quot;FOREGROUND&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<p>For reference, the command to build this would be <code>docker build -t webserver .</code> (assuming the Dockerfile is in the same directory as where you run the command from). Once starting the container with the appropriate options (<code>docker run -d --name webserver -p 80:80  webserver</code>), we can navigate to the IP address of our local machine in our browser!</p>
<p><img decoding="async" loading="lazy" alt="The default landing page of apache2 which can be used to confirm that the service is running" src="/TryHackMe-CN/en/assets/images/image_20251144-144442-dd886dcf7e22bf75eecb126a98f29528.png" width="717" height="814" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="optimising-our-dockerfile">Optimising Our Dockerfile<a href="#optimising-our-dockerfile" class="hash-link" aria-label="Direct link to Optimising Our Dockerfile" title="Direct link to Optimising Our Dockerfile" translate="no">​</a></h3>
<p>There’s certainly an art to Docker - and it doesn’t stop with Dockerfiles! Firstly, we need to ask ourselves why is it essential to optimise our Dockerfile? Bloated Dockerfiles are hard to read and maintain and often use a lot of unnecessary storage! For example, you can reduce the size of a docker image (and reduce build time!) using a few ways:</p>
<ol>
<li class="">Only installing the essential packages. What’s nice about containers is that they’re practically empty from the get-go - we have complete freedom to decide what we want.</li>
<li class="">Removing cached files (such as APT cache or documentation installed with tools). The code within a container will only be executed once (on build!), so we don’t need to store anything for later use.</li>
<li class="">Using minimal base operating systems in our <code>FROM</code> instruction. Even though operating systems for containers such as Ubuntu are already pretty slim, consider using an even more stripped-down version (i.e. <code>ubuntu:22.04-minimal</code>). Or, for example, using Alpine (which can be as small as 5.59MB!).</li>
<li class="">Minimising the number of layers - I’ll explain this further below.</li>
</ol>
<p>Each instruction (I.E. <code>FROM</code>, <code>RUN</code>, etc.) is run in its own layer. Layers increase build time! The objective is to have as few layers as possible. For example, try chaining commands from <code>RUN</code> together like so:</p>
<p><strong>Before:</strong></p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu:latest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get update -y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get upgrade -y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get install apache2 -y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get install net-tools -y</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing five layers of a Dockerfile being built</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> before </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--omitted</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> brevity--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/5 </span><span class="token builtin class-name">:</span><span class="token plain"> RUN </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 446962612d20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">/5 </span><span class="token builtin class-name">:</span><span class="token plain"> RUN </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> upgrade </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Running </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 8bed81c695f4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--omitted</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> brevity--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p><strong>After:</strong></p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu:latest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get update -y &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install apache2 -y &amp;&amp; apt-get install net-tools</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">A terminal showing two layers of a Dockerfile being built</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> after </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sending build context to Docker daemon   </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.78MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/2 </span><span class="token builtin class-name">:</span><span class="token plain"> FROM ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 2dc39ba059dc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/2 </span><span class="token builtin class-name">:</span><span class="token plain"> RUN </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> upgrade </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> apache2 </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> net-tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Running </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> a4d4943bcf04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--omitted</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> brevity--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmnatic@thm:~$</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="An illustration showing that the commands have been compressed into two layers." src="/TryHackMe-CN/en/assets/images/image_20251147-144702-ff56c1542ea0843f462bcc3d78fb3295.png" width="800" height="114" class="img_ev3q"></p>
<p>Note here how there are now only two build steps (this will be two layers, making the build much quicker). This is just a tiny example of a Dockerfile, so the build time will not be so drastic, but in much larger Dockerfiles - reducing the number of layers will have a fantastic performance increase during the build.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What instruction would we use to specify what base image the container should be using? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What instruction would we use to tell the container to run a command? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RUN</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What docker command would we use to build an image using a Dockerfile? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">build</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Let&#x27;s say we want to name this image; what argument would we use? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-t</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-5-intro-to-docker-compose">Task 5 Intro to Docker Compose<a href="#task-5-intro-to-docker-compose" class="hash-link" aria-label="Direct link to Task 5 Intro to Docker Compose" title="Direct link to Task 5 Intro to Docker Compose" translate="no">​</a></h2>
<p>Let’s first understand what Docker Compose is and why it’s worth understanding. So far, we’ve only interacted with containers individually. Docker Compose, in summary, allows multiple containers (or applications) to interact with each other when needed while running in isolation from one another.</p>
<p>You may have noticed a problem with Docker so far. More often than not, applications require additional services to run, which we cannot do in a single container. For example, modern - dynamic - websites use services such as databases and a web server. For the sake of this task, we will consider each application as a “microservice”.</p>
<p>While we can spin up multiple containers or “microservices” individually and connect them, doing so one by one is cumbersome and inefficient. Docker Compose allows us to create these “microservices” as one singular “service”.</p>
<p>This illustration shows how containers are deployed together using Docker Compose Vs. Docker:</p>
<p><img decoding="async" loading="lazy" alt="A blue box (representing a computer) with a caption of docker, is isolated from another set of blue boxes (representing a computer)." src="/TryHackMe-CN/en/assets/images/image_20251151-145132-4b180d1a717073985691f21e3ff97617.png" width="682" height="490" class="img_ev3q"></p>
<p>Before we demonstrate Docker Compose, let’s cover the fundamentals of using Docker Compose.</p>
<ol>
<li class="">We need Docker Compose installed (it does not come with Docker by default). Installing it is out of scope for this room, as it changes depending on your operating system and other factors. You can check out the installation documentation here.</li>
<li class="">We need a valid docker-compose.yml file - we will come onto this shortly.</li>
<li class="">A fundamental understanding of using Docker Compose to build and manage containers.</li>
</ol>
<p>I have put some of the essential Docker Compose commands into the table below:</p>
<table><thead><tr><th style="text-align:center">Command</th><th style="text-align:center">Explanation</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">up</td><td style="text-align:center">This command will (re)create/build and start the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose up</code></td></tr><tr><td style="text-align:center">start</td><td style="text-align:center">This command will start (but requires the containers already being built) the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose start</code></td></tr><tr><td style="text-align:center">down</td><td style="text-align:center">This command will stop and <strong>delete</strong> the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose down</code></td></tr><tr><td style="text-align:center">stop</td><td style="text-align:center">This command will stop (<strong>not</strong> delete) the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose stop</code></td></tr><tr><td style="text-align:center">build</td><td style="text-align:center">This command will build (but will not start) the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose build</code></td></tr></tbody></table>
<p><strong>Note</strong>: These are just a few of the possible commands. Check out the <a href="https://docs.docker.com/compose/reference/" target="_blank" rel="noopener noreferrer" class="">compose documentation</a> for all possible options.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-showcase-of-docker-compose">A Showcase of Docker Compose<a href="#a-showcase-of-docker-compose" class="hash-link" aria-label="Direct link to A Showcase of Docker Compose" title="Direct link to A Showcase of Docker Compose" translate="no">​</a></h3>
<p>With that said, let’s look into how we can use Docker Compose ourselves. In this scenario, I am going to assume the following requirements:</p>
<ol>
<li class="">An E-commerce website running on Apache</li>
<li class="">This E-commerce website stores customer information in a MySQL database</li>
</ol>
<p>Now, we could manually run the two containers via the following:</p>
<ol>
<li class="">Creating the network between the two containers: <code>docker network create ecommerce</code></li>
<li class="">Running the Apache2 webserver container: <code>docker run -p 80:80 --name webserver --net ecommerce webserver</code></li>
<li class="">Running the MySQL Database server: <code>docker run --name database --net ecommerce webserver</code></li>
</ol>
<p><img decoding="async" loading="lazy" alt="An illustration showing the two containers spun up using docker compose. Note that they are unable to communicate with one another" src="/TryHackMe-CN/en/assets/images/image_20251154-145446-770fc33ae617aad6ff456959c693ea78.png" width="494" height="628" class="img_ev3q"></p>
<p>An illustration shows two containers running independently of each other and is unable to communicate with one another.</p>
<p>…but do we want to do this every time? Or what if we decide to scale up and get many web servers involved? Do we want to do this for every container, every time? I certainly don’t.</p>
<p>Instead, we can use Docker Compose via <code>docker-compose up</code> to run these containers together, giving us the advantages of:</p>
<ol>
<li class="">One simple command to run them both</li>
<li class="">These two containers are networked together, so we don’t need to go about configuring the network.</li>
<li class="">Extremely portable. We can share our docker-compose.yml file with someone else, and they can get the setup working precisely the same without understanding how the containers work individually.</li>
<li class="">Easy to maintain and change. We don’t have to worry about specific containers using (perhaps outdated) images.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="img" src="/TryHackMe-CN/en/assets/images/image_20251156-145632-0f1491c80a0d310f0f25172f2af8bbf3.png" width="462" height="550" class="img_ev3q"></p>
<p>An illustration showing two containers deployed as a combined service. These two containers can communicate with one another.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-composeyml-files-101">Docker-compose.yml files 101<a href="#docker-composeyml-files-101" class="hash-link" aria-label="Direct link to Docker-compose.yml files 101" title="Direct link to Docker-compose.yml files 101" translate="no">​</a></h3>
<p>One file to rule them all. The formatting of a docker-compose.yml file is different to that of a Dockerfile. It is important to note that YAML requires indentation (a good practice is two spaces which must be consistent!). First, I’ll show some of the new instructions that you will need to learn to be able to write a docker-compose.yml file before we go into creating a docker-compose.yml file:</p>
<table><thead><tr><th style="text-align:center">Instruction</th><th style="text-align:center">Explanation</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">version</td><td style="text-align:center">This is placed at the top of the file and is used to identify what version of Compose the docker-compose.yml is written for.</td><td style="text-align:center"><code>&#x27;3.3&#x27;</code></td></tr><tr><td style="text-align:center">services</td><td style="text-align:center">This instruction marks the beginning of the containers to be managed.</td><td style="text-align:center"><code>services:</code></td></tr><tr><td style="text-align:center">name (replace value)</td><td style="text-align:center">This instruction is where you define the container and its configuration. &quot;name&quot; needs to be replaced with the actual name of the container you want to define, i.e. &quot;webserver&quot; or &quot;database&quot;.</td><td style="text-align:center"><code>webserver</code></td></tr><tr><td style="text-align:center">build</td><td style="text-align:center">This instruction defines the directory containing the Dockerfile for this container/service. (you will need to use this or an image).</td><td style="text-align:center"><code>./webserver</code></td></tr><tr><td style="text-align:center">ports</td><td style="text-align:center">This instruction publishes ports to the exposed ports (this depends on the image/Dockerfile).</td><td style="text-align:center"><code>&#x27;80:80&#x27;</code></td></tr><tr><td style="text-align:center">volumes</td><td style="text-align:center">This instruction lists the directories that should be mounted into the container from the host operating system.</td><td style="text-align:center"><code>&#x27;./home/cmnatic/webserver/:/var/www/html&#x27;</code></td></tr><tr><td style="text-align:center">environment</td><td style="text-align:center">This instruction is used to pass environment variables (not secure), i.e. passwords, usernames, timezone configurations, etc.</td><td style="text-align:center"><code>MYSQL_ROOT_PASSWORD=helloworld</code></td></tr><tr><td style="text-align:center">image</td><td style="text-align:center">This instruction defines what image the container should be built with (you will need to use this or build).</td><td style="text-align:center"><code>mysql:latest</code></td></tr><tr><td style="text-align:center">networks</td><td style="text-align:center">This instruction defines what networks the containers will be a part of. Containers can be part of multiple networks (i.e. a web server can only contact one database, but the database can contact multiple web servers).</td><td style="text-align:center"><code>ecommerce</code></td></tr></tbody></table>
<p><strong>Note</strong>: These are just some of the possible instructions possible. Check out the <a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer" class="">compose file</a> documentation for all possible instructions.</p>
<p>With that said, let’s look at our first docker-compose.yml file. This docker-compose.yml file assumes the following:</p>
<ol>
<li class="">We will run one web server (named web) from the previously mentioned scenario.</li>
<li class="">We will run a database server (named database) from the previously mentioned scenario.</li>
<li class="">The web server is going to be built using its Dockerfile, but we are going to use an already-built image for the database server (MySQL)</li>
<li class="">The containers will be networked to communicate with each other (the network is called ecommerce).</li>
<li class="">Our directory listing looks like the following:</li>
<li class="">docker-compose.yml</li>
<li class="">web/Dockerfile</li>
</ol>
<p>Here is what our docker-compose.yml file would look like (as a reminder, it is essential to pay attention to the indentation):</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;80:80&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_DATABASE=ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_USERNAME=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_ROOT_PASSWORD=helloword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ecommerce</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> I want to use <code>docker-compose</code> to start up a series of containers. What argument allows me to do this? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">up</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> I want to use <code>docker-compose</code> to delete the series of containers. What argument allows me to do this? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">down</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What is the name of the .yml file that <code>docker-compose</code> uses? <br><strong>Note</strong>: for this question, you will need to include the .yml file extension in your answer </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose.yml</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-6-intro-to-the-docker-socket">Task 6 Intro to the Docker Socket<a href="#task-6-intro-to-the-docker-socket" class="hash-link" aria-label="Direct link to Task 6 Intro to the Docker Socket" title="Direct link to Task 6 Intro to the Docker Socket" translate="no">​</a></h2>
<p>This task will explain how Docker interacts between the operating system and the container. When you install Docker, there are two programs that get installed:</p>
<ol>
<li class="">The Docker Client</li>
<li class="">The Docker Server</li>
</ol>
<p>Docker works in a client/server model. Specifically, these two programs communicate with each other to form the Docker that we know and love. Docker achieves this communication using something called a socket. Sockets are an essential feature of the operating system that allows data to be communicated.</p>
<p>For example, when using a chat program, there could be two sockets:</p>
<ol>
<li class="">A socket for storing a message that you are sending</li>
<li class="">A socket for storing a message that someone is sending you.</li>
</ol>
<p>The program will interact with these two sockets to store or retrieve the data within them! A socket can either be a network connection or what is represented as a file. What&#x27;s important to know about sockets is that they allow for Interprocess Communication (IPC). This simply means that processes on an operating system can communicate with each other!</p>
<p>In the context of Docker, the Docker Server is effectively just an API. The Docker Server uses this API to <strong>listen</strong> for requests, whereas the Docker Client uses the API to <strong>send</strong> requests.</p>
<p>For example, let&#x27;s take this command: <strong>docker run helloworld</strong>. The Docker Client will request the Docker server to run a container using the image &quot;helloworld&quot;. Now, whilst this explanation is fairly basic, it is the essential premise of how Docker works.</p>
<p>Let&#x27;s look at the following diagram to show this process in action:</p>
<p><img decoding="async" loading="lazy" alt="illustrating the flow of Docker interaction using the docker.sock file on the operating system" src="/TryHackMe-CN/en/assets/images/image_20251105-150556-3b1e44318190a28e190a9ccfbe411e99.png" width="453" height="742" class="img_ev3q"></p>
<p>What&#x27;s interesting is that because of this, we can interact with the Docker Server using commands like curl or an API developer tool such as Postman. But, using this is out of the scope for this room.</p>
<p>Finally, it&#x27;s important to note that because of this, the host machine running Docker can be configured to process commands sent from another device. This is an extremely dangerous vulnerability if it is not correctly configured because it means someone can remotely stop, start, and access Docker containers. Despite this, there are use cases where this feature of Docker is extremely helpful! We will cover this in further detail in a later room!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What does the term &quot;IPC&quot; stand for? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Interprocess Communication</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What technology can the Docker Server be equalled to? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">API</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-7-practical">Task 7 Practical<a href="#task-7-practical" class="hash-link" aria-label="Direct link to Task 7 Practical" title="Direct link to Task 7 Practical" translate="no">​</a></h2>
<p>Deploy the virtual machine attached to this task by pressing the green &quot;<code>Start Machine</code>&quot; button. After fully loading, the virtual machine will appear in split view in your web browser. If you don&#x27;t see the VM, click the blue &quot;<code>Show Split View</code>&quot; button located at the top right near the top of this page.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Connect to the machine. What is the name of the container that is currently running? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cloudisland</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Use Docker to start a web server with the &quot;webserver&quot; image (no quotations). You will need to <code>run the container with port 80</code>.<br>After starting the container, try to connect to <a href="https://LAB_WEB_URL.p.thmlabs.com/" target="_blank" rel="noopener noreferrer" class="">https://LAB_WEB_URL.p.thmlabs.com/</a> in your browser. What is the flag? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">THM{WEBSERVER_CONTAINER}</span><br></span></code></pre></div></div></div></div></details></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/TryHackMyOffsecBox/TryHackMe-CN/tree/main/packages/create-docusaurus/templates/shared/docs/Modules/Container Security/Intro to Docker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Containerisation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro to Containerisation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Intro to Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#task-1-introduction" class="table-of-contents__link toc-highlight">Task 1 Introduction</a></li><li><a href="#task-2-basic-docker-syntax" class="table-of-contents__link toc-highlight">Task 2 Basic Docker Syntax</a><ul><li><a href="#managing-docker-images" class="table-of-contents__link toc-highlight">Managing Docker Images</a></li><li><a href="#docker-image-xyz" class="table-of-contents__link toc-highlight">Docker Image x/y/z</a></li><li><a href="#docker-image-ls" class="table-of-contents__link toc-highlight">Docker Image ls</a></li><li><a href="#docker-image-rm" class="table-of-contents__link toc-highlight">Docker Image rm</a></li></ul></li><li><a href="#task-3-running-your-first-container" class="table-of-contents__link toc-highlight">Task 3 Running Your First Container</a><ul><li><a href="#first-simply-running-a-container" class="table-of-contents__link toc-highlight">First, Simply Running a Container</a></li><li><a href="#running-containerscontinued" class="table-of-contents__link toc-highlight">Running Containers...Continued</a></li><li><a href="#listing-running-containers" class="table-of-contents__link toc-highlight">Listing Running Containers</a></li></ul></li><li><a href="#task-4-intro-to-dockerfiles" class="table-of-contents__link toc-highlight">Task 4 Intro to Dockerfiles</a><ul><li><a href="#building-your-first-container" class="table-of-contents__link toc-highlight">Building Your First Container</a></li><li><a href="#levelling-up-our-dockerfile" class="table-of-contents__link toc-highlight">Levelling up Our Dockerfile</a></li><li><a href="#optimising-our-dockerfile" class="table-of-contents__link toc-highlight">Optimising Our Dockerfile</a></li></ul></li><li><a href="#task-5-intro-to-docker-compose" class="table-of-contents__link toc-highlight">Task 5 Intro to Docker Compose</a><ul><li><a href="#a-showcase-of-docker-compose" class="table-of-contents__link toc-highlight">A Showcase of Docker Compose</a></li><li><a href="#docker-composeyml-files-101" class="table-of-contents__link toc-highlight">Docker-compose.yml files 101</a></li></ul></li><li><a href="#task-6-intro-to-the-docker-socket" class="table-of-contents__link toc-highlight">Task 6 Intro to the Docker Socket</a></li><li><a href="#task-7-practical" class="table-of-contents__link toc-highlight">Task 7 Practical</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/TryHackMe-CN/en/docs">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/TryHackMyOffsecBox" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github - TryHackMyOffsecBox<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/CRONUS-Security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github - CRONUS-Security<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 TryHackMyOffsecBox. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>