<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Modules/Container Security/Intro to Kubernetes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Intro to Kubernetes | TryHackMe-CN</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Intro to Kubernetes | TryHackMe-CN"><meta data-rh="true" name="description" content="Task 1 Introduction"><meta data-rh="true" property="og:description" content="Task 1 Introduction"><link data-rh="true" rel="icon" href="/TryHackMe-CN/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes"><link data-rh="true" rel="alternate" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes" hreflang="en"><link data-rh="true" rel="alternate" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/docs/Modules/Container Security/Intro to Kubernetes" hreflang="zh"><link data-rh="true" rel="alternate" href="https://tryhackmyoffsecbox.github.io/TryHackMe-CN/docs/Modules/Container Security/Intro to Kubernetes" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Modules","item":"https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/"},{"@type":"ListItem","position":2,"name":"Container Security","item":"https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/"},{"@type":"ListItem","position":3,"name":"Intro to Kubernetes","item":"https://tryhackmyoffsecbox.github.io/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes"}]}</script><link rel="alternate" type="application/rss+xml" href="/TryHackMe-CN/en/blog/rss.xml" title="TryHackMe-CN RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/TryHackMe-CN/en/blog/atom.xml" title="TryHackMe-CN Atom Feed"><link rel="stylesheet" href="/TryHackMe-CN/en/assets/css/styles.6c4c8a38.css">
<script src="/TryHackMe-CN/en/assets/js/runtime~main.04faffd1.js" defer="defer"></script>
<script src="/TryHackMe-CN/en/assets/js/main.2d548b1e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/TryHackMe-CN/en/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TryHackMe-CN/en/"><div class="navbar__logo"><img src="/TryHackMe-CN/en/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/TryHackMe-CN/en/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TryHackMe-CN</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/TryHackMe-CN/en/docs/Modules/">Tutorial</a><a class="navbar__item navbar__link" href="/TryHackMe-CN/en/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/TryHackMe-CN/docs/Modules/Container Security/Intro to Kubernetes" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/TryHackMyOffsecBox/TryHackMe-CN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/TryHackMe-CN/en/docs/Modules/"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Collapse sidebar category &#x27;Modules&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Attacking LLMs/"><span title="Attacking LLMs" class="categoryLinkLabel_W154">Attacking LLMs</span></a><button aria-label="Expand sidebar category &#x27;Attacking LLMs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Command Line/"><span title="Command Line" class="categoryLinkLabel_W154">Command Line</span></a><button aria-label="Expand sidebar category &#x27;Command Line&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/"><span title="Container Security" class="categoryLinkLabel_W154">Container Security</span></a><button aria-label="Collapse sidebar category &#x27;Container Security&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Containerisation"><span title="Intro to Containerisation" class="linkLabel_WmDU">Intro to Containerisation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker"><span title="Intro to Docker" class="linkLabel_WmDU">Intro to Docker</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Kubernetes"><span title="Intro to Kubernetes" class="linkLabel_WmDU">Intro to Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Container Vulnerabilities"><span title="Container Vulnerabilities" class="linkLabel_WmDU">Container Vulnerabilities</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Container Security/Container Hardening"><span title="Container Hardening" class="linkLabel_WmDU">Container Hardening</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Host Evasions/"><span title="Host Evasions" class="categoryLinkLabel_W154">Host Evasions</span></a><button aria-label="Expand sidebar category &#x27;Host Evasions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Memory Analysis/"><span title="Memory Analysis" class="categoryLinkLabel_W154">Memory Analysis</span></a><button aria-label="Expand sidebar category &#x27;Memory Analysis&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Microsoft Defender XDR/"><span title="Microsoft Defender XDR" class="categoryLinkLabel_W154">Microsoft Defender XDR</span></a><button aria-label="Expand sidebar category &#x27;Microsoft Defender XDR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/TryHackMe-CN/en/docs/Modules/Starters/"><span title="Starters" class="categoryLinkLabel_W154">Starters</span></a><button aria-label="Expand sidebar category &#x27;Starters&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/TryHackMe-CN/en/docs/Networks/"><span title="Networks" class="categoryLinkLabel_W154">Networks</span></a><button aria-label="Expand sidebar category &#x27;Networks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TryHackMe-CN/en/docs/"><span title="index" class="linkLabel_WmDU">index</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/TryHackMe-CN/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/TryHackMe-CN/en/docs/Modules/"><span>Modules</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/TryHackMe-CN/en/docs/Modules/Container Security/"><span>Container Security</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Intro to Kubernetes</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Intro to Kubernetes</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-1-introduction">Task 1 Introduction<a href="#task-1-introduction" class="hash-link" aria-label="Direct link to Task 1 Introduction" title="Direct link to Task 1 Introduction" translate="no">​</a></h2>
<p>Kubernetes, Kubernetes, Kubernetes. This word is very popular in the DevSecOps space. This word and the technology it represents, of course. This room is going to tell you why this is. We will take that mysterious word that everyone seems to love so much and turn it into a familiar term by walking you through Kubernetes fundamentals, with a dash of secure K8s practices, and a sprinkle of hands-on experience to top it off. To start dispelling that mystery and save you from thinking &quot;What the hell is a &#x27;Keights&#x27;?&quot;. Kubernetes is sometimes referred to as K8s (a numeronym) - anything to save time in this industry!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-prerequisites">Learning Prerequisites<a href="#learning-prerequisites" class="hash-link" aria-label="Direct link to Learning Prerequisites" title="Direct link to Learning Prerequisites" translate="no">​</a></h3>
<p>This room will continue the DevSecOps path, so all previous DevSecOps modules should be completed, especially the two rooms before this one in the Container Security module (Intro to Containerisation and Intro to Docker) should be done.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate="no">​</a></h3>
<ul>
<li class="">Understand why a system like Kubernetes is needed</li>
<li class="">Understand basic Kubernetes architecture</li>
<li class="">Understand key components of the Kubernetes landscape</li>
<li class="">Understand how to traverse a Kubernetes cluster using kubectl</li>
<li class="">Understand how Kubernetes is used by DevSecOps engineers and best K8s security practices</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Let&#x27;s go! </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">No answer needed</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-2-kubernetes-101">Task 2 Kubernetes 101<a href="#task-2-kubernetes-101" class="hash-link" aria-label="Direct link to Task 2 Kubernetes 101" title="Direct link to Task 2 Kubernetes 101" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-new-dawn">A New Dawn<a href="#a-new-dawn" class="hash-link" aria-label="Direct link to A New Dawn" title="Direct link to A New Dawn" translate="no">​</a></h3>
<p>To better understand Kubernetes, let us first consider the context of its emergence. In other words, why was it needed in the first place? Back in the day, it was more common for companies to have a monolithic architecture. That is, an application is built as a single unit, a single code base, and usually, a single executable deployed as a single component. This worked and still works for a lot of companies; however, some companies started to switch to a microservices architecture, so instead of having one monolithic application, it would be broken down into different components, each of these components usually having different business functions, meaning high demand business functions can be scaled without having to scale the entire application. One high-profile example of this happened in 2009 (before microservices even had a name) when Netflix had issues meeting their increased demands with their monolithic architecture, and so began the adoption of microservices architecture.</p>
<p>Microservices architecture is now an increasingly popular approach, and the reason why this is so important for today&#x27;s lesson is that container technologies offer the perfect host for these microservices. With microservices architecture often comprising hundreds or even thousands of these containers, there was a need for a technology to help manage and organise them - no prizes for guessing what technology came to the rescue.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="enter-kubernetes">Enter Kubernetes<a href="#enter-kubernetes" class="hash-link" aria-label="Direct link to Enter Kubernetes" title="Direct link to Enter Kubernetes" translate="no">​</a></h3>
<p>Let&#x27;s start with the big question, shall we? What is Kubernetes? In the previous rooms in this module, we discussed containers and Docker, so let&#x27;s use that as our jumping-off point. Imagine you have a Docker container that is running an app that can be accessed externally. Suddenly, this application starts receiving a lot of traffic, so a new container with this application needs to be spun up so the traffic can be distributed between the two. This is where Kubernetes comes in as a container orchestration system. The term &quot;orchestration&quot; conjures up images of a literal orchestra. This metaphor does have some traction, with the containers being like instruments and Kubernetes being the conductor in control of the flow. It would just be a very strange orchestra where the conductor tells the players to leave when they&#x27;re no longer needed for the song and brings new ones on when they are.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-many-benefits-of-kubernetes">The Many Benefits of Kubernetes<a href="#the-many-benefits-of-kubernetes" class="hash-link" aria-label="Direct link to The Many Benefits of Kubernetes" title="Direct link to The Many Benefits of Kubernetes" translate="no">​</a></h3>
<p>Now that we&#x27;ve established what Kubernetes is and why it’s needed, let&#x27;s look at how this technology can benefit the DevSecOps space.</p>
<ul>
<li class="">Kubernetes makes an application highly available and scalable. It does this by, for example, duplicating an application (and its db component) and load balancing external requests to this application to an available resource, therefore removing a single point of failure from the architecture and removing bottlenecks, which can slow down application response times. As mentioned earlier, scalability is a big concern for many companies; Kubernetes allows workloads to be scaled up or down to match demand.</li>
<li class="">Kubernetes is also highly portable in that it can be run anywhere with nearly any type of infrastructure and can be used with a single or multi-cloud set, making it a very flexible tool.</li>
<li class="">Another benefit of Kubernetes is its popularity; because of this, many technologies are compatible with it and can be used to make each tool more powerful.</li>
</ul>
<p>These are just a few ways Kubernetes benefits the DevSecOps space, and it explains why that word is thrown around so much!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Which benefit of Kubernetes means that it can run anywhere on any type of infrastructure? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">highly portable</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Fill in the blank &quot;Kubernetes is a _________ _____________ system&quot;. </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">container orchestration</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-3-kubernetes-architecture">Task 3 Kubernetes Architecture<a href="#task-3-kubernetes-architecture" class="hash-link" aria-label="Direct link to Task 3 Kubernetes Architecture" title="Direct link to Task 3 Kubernetes Architecture" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-architecture">Cluster Architecture<a href="#cluster-architecture" class="hash-link" aria-label="Direct link to Cluster Architecture" title="Direct link to Cluster Architecture" translate="no">​</a></h3>
<p>Okay, so we&#x27;ve learned what Kubernetes is, why it&#x27;s needed and how it can benefit us in DevSecOps. Now, it&#x27;s time to deepen our understanding by looking under the hood and analysing how it can do what it does. That&#x27;s right! It&#x27;s architecture time! We will go through each key component that makes up Kubernetes architecture, one by one, before putting it all together at the end and showing how all these components connect. Let&#x27;s get into it!</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-pod">Kubernetes Pod<a href="#kubernetes-pod" class="hash-link" aria-label="Direct link to Kubernetes Pod" title="Direct link to Kubernetes Pod" translate="no">​</a></h4>
<p>Pods are the smallest deployable unit of computing you can create and manage in Kubernetes. When you work in DevSecOps with Kubernetes, you&#x27;ll hear a lot of this word. You can think of a pod as a group of one or more containers. These containers share storage and network resources. Because of this, containers on the same pod can communicate easily as if they were on the same machine whilst maintaining a degree of isolation. Pods are treated as a unit of replication in Kubernetes; if a workload needs to be scaled up, you will increase the number of pods running.</p>
<p><img decoding="async" loading="lazy" alt="pod diagram" src="/TryHackMe-CN/en/assets/images/image_20251129-182900-ed9c2291b955f66e6aec91bdb1d18292.png" width="924" height="342" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-nodes">Kubernetes Nodes<a href="#kubernetes-nodes" class="hash-link" aria-label="Direct link to Kubernetes Nodes" title="Direct link to Kubernetes Nodes" translate="no">​</a></h4>
<p>Kubernetes workloads (applications) are run inside containers, which are placed in a pod. These pods run on nodes. When talking about node architecture, there are two types to consider. The <code>control plane</code> (also known as &quot;master node&quot;) and <code>worker nodes</code>. Both of these have their own architecture/components, so let&#x27;s take a look at them. Nodes can either be a virtual or physical machine. Think of it this way: if applications run in containers which are placed in a pod, nodes contain all the services necessary to run pods.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-cluster">Kubernetes Cluster<a href="#kubernetes-cluster" class="hash-link" aria-label="Direct link to Kubernetes Cluster" title="Direct link to Kubernetes Cluster" translate="no">​</a></h4>
<p>At the highest level, we have our Kubernetes Cluster; put simply, a Cluster is just a set of nodes.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-kubernetes-control-plane">The Kubernetes Control Plane<a href="#the-kubernetes-control-plane" class="hash-link" aria-label="Direct link to The Kubernetes Control Plane" title="Direct link to The Kubernetes Control Plane" translate="no">​</a></h3>
<p>The control plane manages the worker nodes and pods in the cluster. It does this with the use of various components. Take a look at each of the components and what they are responsible for. Then see them all put together in a control plane architecture diagram.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kube-apiserver">Kube-apiserver<a href="#kube-apiserver" class="hash-link" aria-label="Direct link to Kube-apiserver" title="Direct link to Kube-apiserver" translate="no">​</a></h4>
<p>The API server is the front end of the control plane and is responsible for exposing the Kubernetes API. The kube-apiserver component is scalable, meaning multiple instances can be created so traffic can be load-balanced.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="etcd">Etcd<a href="#etcd" class="hash-link" aria-label="Direct link to Etcd" title="Direct link to Etcd" translate="no">​</a></h4>
<p>Etcd is a key/value store containing cluster data / the current state of the cluster. It is highly available and consistent. If a change is made in the cluster, for example, another pod is spun up, this will be reflected in the key/value store, etcd. The other control plane components rely on etcd as an information store and query it for information such as available resources.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kube-scheduler">Kube-scheduler<a href="#kube-scheduler" class="hash-link" aria-label="Direct link to Kube-scheduler" title="Direct link to Kube-scheduler" translate="no">​</a></h4>
<p>The kube-scheduler component actively monitors the cluster. Its job is to catch any newly created pods that have yet to be assigned to a node and make sure it gets assigned to one. It makes this decision based on specific criteria, such as the resources used by the running application or available resources on all worker nodes.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kube-controller-manager">Kube-controller-manager<a href="#kube-controller-manager" class="hash-link" aria-label="Direct link to Kube-controller-manager" title="Direct link to Kube-controller-manager" translate="no">​</a></h4>
<p>This component is responsible for running the controller processes. There are many different types of controller processes, but one example of a controller process is the node controller process, which is responsible for noticing when nodes go down. The controller manager would then talk to the scheduler component to schedule a new node to come up.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="cloud-controller-manager">Cloud-controller-manager<a href="#cloud-controller-manager" class="hash-link" aria-label="Direct link to Cloud-controller-manager" title="Direct link to Cloud-controller-manager" translate="no">​</a></h4>
<p>This component enables communication between a Kubernetes cluster and a cloud provider API. The purpose of this component is to allow the separation of components that communicate internally within the cluster and those that communicate externally by interacting with a cloud provider. This also allows cloud providers to release features at their own pace.</p>
<p><img decoding="async" loading="lazy" alt="Kubernetes uses a Hub and Spoke API pattern" src="/TryHackMe-CN/en/assets/images/image_20251130-183000-94d9890186b7ec1e9b7fe0ed1ac8ccc6.png" width="924" height="513" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-worker-node">Kubernetes Worker Node<a href="#kubernetes-worker-node" class="hash-link" aria-label="Direct link to Kubernetes Worker Node" title="Direct link to Kubernetes Worker Node" translate="no">​</a></h3>
<p>Worker nodes are responsible for maintaining running pods. Let&#x27;s take a look at the components, which are present on every worker node, and what they are responsible for:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubelet">Kubelet<a href="#kubelet" class="hash-link" aria-label="Direct link to Kubelet" title="Direct link to Kubelet" translate="no">​</a></h4>
<p>Kubelet is an agent that runs on every node in the cluster and is responsible for ensuring containers are running in a pod. Kubelet is provided with pod specifications and ensures the containers detailed in this pod specification are running and healthy! It executes actions given to it by the controller manager, for example, starting the pod with a container inside.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kube-proxy">Kube-proxy<a href="#kube-proxy" class="hash-link" aria-label="Direct link to Kube-proxy" title="Direct link to Kube-proxy" translate="no">​</a></h4>
<p>Kube-proxy is responsible for network communication within the cluster. It makes networking rules so traffic can flow and be directed to a pod (from inside or outside of the cluster). Traffic won&#x27;t hit a pod directly but instead hit something called a Service (which would be associated with a group of pods), and then gets directed to one of the associated pods. More on services in the next task!</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="container-runtime">Container runtime<a href="#container-runtime" class="hash-link" aria-label="Direct link to Container runtime" title="Direct link to Container runtime" translate="no">​</a></h4>
<p>Pods have containers running inside of them. A container runtime must be installed on each node for this to happen. So far, we have covered one example of this in this module, which is probably the most popular choice, Docker. However, some alternatives can be used, such as rkt or runC.</p>
<p><img decoding="async" loading="lazy" alt="The control plane can communicate with nodes using two paths" src="/TryHackMe-CN/en/assets/images/image_20251130-183036-6b9361b9105bf2ce389dbebb77480d5c.png" width="924" height="571" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="communication-between-components">Communication Between Components<a href="#communication-between-components" class="hash-link" aria-label="Direct link to Communication Between Components" title="Direct link to Communication Between Components" translate="no">​</a></h3>
<p>Okay, so we&#x27;ve covered a lot there. Let&#x27;s take a step and look at how all those individual components we&#x27;ve just covered work together to make up Kubernetes architecture. A Kubernetes cluster contains nodes and Kubernetes runs a workload by placing containers into pods that run on these nodes. Take a look at the graphic below to see how all these components come together.</p>
<p><img decoding="async" loading="lazy" alt="Cluster diagram" src="/TryHackMe-CN/en/assets/images/image_20251130-183057-0e1f360a39ce55777120d3ad8f8a8535.png" width="1848" height="769" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What is the smallest deployable unit of computing you can create in Kubernetes? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pod</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Which control plane component is a key/value store which contains data pertaining to the cluster and its current state? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">etcd</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Which worker node component is responsible for network communication within the cluster? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kube-proxy</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-4-kubernetes-landscape">Task 4 Kubernetes Landscape<a href="#task-4-kubernetes-landscape" class="hash-link" aria-label="Direct link to Task 4 Kubernetes Landscape" title="Direct link to Task 4 Kubernetes Landscape" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-lay-of-the-land">The Lay of the Land<a href="#the-lay-of-the-land" class="hash-link" aria-label="Direct link to The Lay of the Land" title="Direct link to The Lay of the Land" translate="no">​</a></h3>
<p>So we&#x27;ve just looked at Kubernetes architecture and how things work and are set up behind the scenes! Now it&#x27;s time to show you the lay of the land. In other words, what, as a DevSecOps engineer, would you be interacting with daily? We will go through some of the most common concepts in Kubernetes and break down what they are.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="namespaces">Namespaces<a href="#namespaces" class="hash-link" aria-label="Direct link to Namespaces" title="Direct link to Namespaces" translate="no">​</a></h4>
<p>In Kubernetes, namespaces are used to isolate groups of resources in a single cluster. For example, say you want to group resources associated with a particular component, or if you are using a cluster to host multiple tenants, to group resources by tenant. Resources must be uniquely named within a namespace, but the same resource name can be used across various namespaces.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="replicaset">ReplicaSet<a href="#replicaset" class="hash-link" aria-label="Direct link to ReplicaSet" title="Direct link to ReplicaSet" translate="no">​</a></h4>
<p>As the name suggests, a ReplicaSet in Kubernetes maintains a set of replica pods and can guarantee the availability of x number of identical pods (identical pods are helpful when a workload needs to be distributed between multiple pods). ReplicaSets usually aren&#x27;t defined directly (neither are pods, for that matter) but are instead managed by a deployment, which brings us to our next concept.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployments">Deployments<a href="#deployments" class="hash-link" aria-label="Direct link to Deployments" title="Direct link to Deployments" translate="no">​</a></h4>
<p>Deployments in Kubernetes are used to define a desired state. Once this desired state is defined, the deployment controller (one of the controller processes) changes the actual state to the desired state. Deployments provide declarative updates for pods and replica sets. In other words, as a user, you can define a deployment, let&#x27;s say, for example, &quot;test-nginx-deployment&quot;. In the definition, you can note that you want this deployment to have a ReplicaSet comprising three nginx pods. Once this deployment is defined, the ReplicaSet will create the pods in the background.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="statefulsets">StatefulSets<a href="#statefulsets" class="hash-link" aria-label="Direct link to StatefulSets" title="Direct link to StatefulSets" translate="no">​</a></h4>
<p>To understand what Kubernetes Statefulsets are, you must first understand the difference between stateful and stateless apps. Stateful apps store and record user data, allowing them to return to a particular state. For example, suppose you have an open session using an email application and read 3 emails, but your session is interrupted. In that case, you can reload this application, and the state will have saved, ensuring these 3 emails are still read. Stateless applications, however, have no knowledge of any previous user interactions as it does not store user session data. For example, think of using a search engine to ask a question. If that session were to be interrupted, you would start the process again by searching the question, not relying on any previous session data.</p>
<p>For these stateless applications (search engine example), deployments can be used to define and manage pod replicas. Because of the application&#x27;s stateless nature, replicas can be created with random pod names, and when removed, a pod can be deleted at random.</p>
<p>However, this is not the case for stateful applications (email example), because stateful applications need to access and update the current state of the user session. Imagine this current state is being stored in a database running across 3 pods (meaning the database is replicated 3 times). Now, what happens when one of the databases is updated? This would leave 2 of the databases out of sync. This is where StatefulSets come in and is why you would use that instead of a deployment to manage stateful applications in Kubernetes.</p>
<p>Statefulsets enable stateful applications to run on Kubernetes, but unlike pods in a deployment, they cannot be created in any order and will have a unique ID (which is persistent, meaning if a pod fails, it will be brought back up and keep this ID) associated with each pod. In other words, these pods are created from the same specification but are not interchangeable. StatefulSets will have one pod that can read/write to the database (because there would be absolute carnage and all sorts of data inconsistency if the other pods could), referred to as the master pod. The other pods, referred to as slave pods, can only read and have their own replication of the storage, which is continuously synchronised to ensure any changes made by the master node are reflected.</p>
<p><img decoding="async" loading="lazy" alt="statefulset diagram" src="/TryHackMe-CN/en/assets/images/image_20251135-183557-c48e00936023e45ea10daff5141c8991.png" width="924" height="594" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="services">Services<a href="#services" class="hash-link" aria-label="Direct link to Services" title="Direct link to Services" translate="no">​</a></h4>
<p>To best understand services in Kubernetes, it&#x27;s important to understand the problem they are solving. Kubernetes pods are ephemeral, meaning they have a short lifespan and are spun up and destroyed regularly. Imagine now a connection needs to be made to these pods. This could be from within the cluster; maybe a back-end application is running in these pods, and a front-end application needs to access them, or perhaps the request is coming from a browser, and these pods are running a web application. For this connection to happen, an IP address is required. If IP addresses were tied to pods, then these IP addresses would change frequently, causing all kinds of issues; services are used so that a single static IP address can be associated with a pod and its replicas. In other words, a service is placed in front of these pods and exposes them, acting as an access point. Having this single access point allows for requests to be load-balanced between the pod replicas. There are different types of services you can define: ClusterIP, LoadBalancer, NodePort and ExternalName. To learn more about these types and services in general, check out <a href="https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types" target="_blank" rel="noopener noreferrer" class="">here</a>.</p>
<p><img decoding="async" loading="lazy" alt="The source of the traffic will depend on the type of service" src="/TryHackMe-CN/en/assets/images/image_20251136-183654-606abadb6664307e04e97048ca5f6aa7.png" width="924" height="661" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingress">Ingress<a href="#ingress" class="hash-link" aria-label="Direct link to Ingress" title="Direct link to Ingress" translate="no">​</a></h4>
<p>In the above section on Kubernetes services, we mentioned an example of an application which can be made accessible by using a service to expose the pods running this application (let&#x27;s call this service A). Imagine now that this web application has a new feature. This new feature requires its own application and so has its own set of pods, which are being exposed by a separate service (let&#x27;s call this service B). Now, let&#x27;s say a user requests to access this new feature of the web application; there will need to be some kind of traffic routing in place to ensure this request gets directed to service B. That is where ingress comes in. Ingress acts as a single access point to the cluster and means that all routing rules are in a single resource.</p>
<p><img decoding="async" loading="lazy" alt="The source of the traffic will depend on the type of service" src="/TryHackMe-CN/en/assets/images/image_20251137-183726-ae4e8c08e452fb657456cdc6e4e7e325.png" width="924" height="597" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="devops-vs-devsecops-in-k8s">DevOps vs. DevSecOps in K8s<a href="#devops-vs-devsecops-in-k8s" class="hash-link" aria-label="Direct link to DevOps vs. DevSecOps in K8s" title="Direct link to DevOps vs. DevSecOps in K8s" translate="no">​</a></h3>
<p>This task has shown you some of the Kubernetes resources that work together to make a cluster. Next up, we&#x27;re going to discuss how we interact with this cluster to create these components, but before we do that, this would be a good moment to discuss the division of labour in the world of K8s. It&#x27;s important to understand, especially when learning for a certain career path, the difference between DevOps and DevSecOps responsibilities. At a very high level, you can think of DevOps tasks as those associated with building a cluster and DevSecOps tasks as those associated with securing a cluster. There will, of course, be some overlap depending on company architecture or corporate set-up, but generally, these tasks can be defined as one or the other. As this room serves as an introduction, it begins by showing you the building blocks of a Kubernetes cluster and how to interact with these resources (DevOps tasks). As this knowledge is foundational, understanding these concepts will help you in the later tasks when we discuss securing the cluster (DevSecOps tasks). That being said, as mentioned, the distinction is important, especially for those pursuing a specific career path, so keep this in mind going forward!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Which Kubernetes component exposes pods and serves as an access point? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Service</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Which Kubernetes component can guarantee the availability of X number of pods? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ReplicaSet</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What Kubernetes component is used to define a desired state? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Deployments</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-5-kubernetes-configuration">Task 5 Kubernetes Configuration<a href="#task-5-kubernetes-configuration" class="hash-link" aria-label="Direct link to Task 5 Kubernetes Configuration" title="Direct link to Task 5 Kubernetes Configuration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="time-to-configure">Time to Configure<a href="#time-to-configure" class="hash-link" aria-label="Direct link to Time to Configure" title="Direct link to Time to Configure" translate="no">​</a></h3>
<p>Now that we&#x27;ve covered some of the key components used in Kubernetes, let&#x27;s combine some of them and walk you through how this would be configured! The example we will use is a deployment which controls a ReplicaSet, which manages pods exposed by a service.</p>
<p><img decoding="async" loading="lazy" alt="Interfacing with deployment diagram" src="/TryHackMe-CN/en/assets/images/image_20251140-184045-3d642be676b21e04ef0a7e94cdb9f98a.png" width="924" height="333" class="img_ev3q"></p>
<p>To configure this setup, we would require two configuration files, one for the deployment and one for the service. Before giving you an example of how each of these files works, let&#x27;s go over some of the basics of configuration in Kubernetes that will be consistent across these two files (and all configuration files, for that matter).</p>
<p>First, let&#x27;s discuss the file format. Kubernetes config files are typically written in YAML. They can also be made interchangeably using the JSON format, but as per the Kubernetes documentation, it is generally considered best practice to use YAML given its easy, human-readable nature (just gotta keep an eye on that indentation!).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="required-fields">Required Fields<a href="#required-fields" class="hash-link" aria-label="Direct link to Required Fields" title="Direct link to Required Fields" translate="no">​</a></h4>
<p>Next, let&#x27;s discuss the four fields which must be present in each of the YAML files, breaking down what will need to be included in each one:</p>
<p><strong>apiVersion</strong>: The version of the Kubernetes API you are going to use to create this object. The API version you use will depend on the object being defined. A cheatsheet for what API version to use for which object can be found here.</p>
<p><strong>kind</strong>: What kind of object you are going to create (e.g. Deployment, Service, StatefulSet).</p>
<p><strong>metadata</strong>: This will contain data that can be used to uniquely identify the object (including name and an optional namespace).</p>
<p><strong>spec</strong>: The desired state of the object (for deployment, this might be 3 nginx pods).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-resources">Configuring Resources<a href="#configuring-resources" class="hash-link" aria-label="Direct link to Configuring Resources" title="Direct link to Configuring Resources" translate="no">​</a></h4>
<p>Those are the very basics of Kubernetes YAML configuration files. Let&#x27;s consider those and look now at the two files mentioned above. We&#x27;re going to take a look at the service config file first, as when defining a deployment and service, it is generally best practice to first define the service before the back-end deployment/replicaset that it points to (this is because when Kubernetes starts a container, it creates an env variable for each service that was running when a container started). Here is what our example-service.yaml file looks like:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span></code></pre></div></div>
<p>Let&#x27;s break that down: <strong>apiVersion</strong> is set to v1 (the version of the Kubernetes API best used for this simple service example), and <strong>kind</strong> is set to service. For the <strong>metadata</strong>, we just called this service &quot;example-nginx-service&quot;. The <strong>spec</strong> is where it gets more interesting, under &#x27;selector&#x27;, we have &#x27;app: nginx&#x27;. This is going to be important going forward when we define our deployment configuration, as is the <strong>ports</strong> information, as we are essentially saying here: &quot;This service will look for apps with the nginx label and will target port 80. An important distinction to make here is between the &#x27;port&#x27; and &#x27;targetPort&#x27; fields. The &#x27;targetPort&#x27; is the port to which the service will send requests, i.e., the port the pods will be listening on. The &#x27;port&#x27; is the port the service is exposed on. Finally, the &#x27;type&#x27; is defined as ClusterIP (earlier, we discussed that there were multiple types of services, and this is one of them), which is the default service type. Now let&#x27;s take a look at the Deployment YAML and define the back end which this service will point to:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre></div></div>
<p>The first thing you might notice is that inside the &#x27;spec&#x27; field, there is a nested field called &#x27;template&#x27;, which itself contains a &#x27;metadata&#x27; and &#x27;spec&#x27; field. To understand this, remember the image at the start of this task. We are defining a deployment which controls a ReplicaSet; here, in the outer &#x27;spec&#x27; field, we tell Kubernetes we want 3 replicas (identical pods) in this ReplicaSet. This template field is the template that Kubernetes will use to create those pods and so requires its own metadata field (so the pod can be identified) and spec field (so Kubernetes knows what image to run and which port to listen on). Note that the port defined here is the same as the one in the service YAML. This is because the service&#x27;s target port is 80 and needs to match. As well as this, in the outer &#x27;spec&#x27; field, you can see we have also set the &#x27;selector&#x27; field to have a &#x27;matchLabels&#x27;, which matches what we defined in the &#x27;selector&#x27; field for the service YAML. This is so the service is mapped to the correct pods. With these two config YAML files, we have defined a deployment that controls a ReplicaSet that manages 3 pods, all of which are exposed to a service. It&#x27;s all coming together!</p>
<p>These config files are used to define the desired state of Kubernetes components; Kubernetes will constantly be checking this desired state against the current state of the cluster. Using the etcd (one of the control plane processes mentioned in an earlier task), Kubernetes populates these configuration files with the current state and does this comparison. For example, if we have told Kubernetes we want 3 nginx pods running, and it detects in the status that there are only 2 running pods, it will begin the actions to correct this.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> In a config file, you have just declared that you want 4 nginx pods. In which one of the &#x27;required fields&#x27; has this been declared? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spec</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> The configuration file is for a deployment. In which one of the &#x27;required fields&#x27; is this declared? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kind</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> The pods in this deployment will be exposed by a service. In the service configuration file, the target port was set to 80. What should you put as the &#x27;containerPort&#x27;? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">80</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-6-kubectl">Task 6 Kubectl<a href="#task-6-kubectl" class="hash-link" aria-label="Direct link to Task 6 Kubectl" title="Direct link to Task 6 Kubectl" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-to-the-rescue">Kubectl to the Rescue<a href="#kubectl-to-the-rescue" class="hash-link" aria-label="Direct link to Kubectl to the Rescue" title="Direct link to Kubectl to the Rescue" translate="no">​</a></h3>
<p>We&#x27;ve just covered how to define the desired state of your cluster using YAML config files, but currently, those exist only as files. To take these from configurations to running processes, we need to interact with the cluster. We can do this by interacting with the apiserver component of the control plane using different methods: UI if using the Kubernetes dashboard, API if using some sort of script or command line using a tool called kubectl. This task focuses on the last of these. Simply put, kubectl is a command line tool provided by Kubernetes that allows us to communicate with a Kubernetes cluster&#x27;s control plane and is a great addition to your DevSecOps arsenal. This task will show you how to take the config files outlined in the previous task and apply them, as well as give you some boot camp training for this tool, teaching you some of the basic commands so you can navigate a Kubernetes cluster like it&#x27;s your back garden!</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-apply">Kubectl apply<a href="#kubectl-apply" class="hash-link" aria-label="Direct link to Kubectl apply" title="Direct link to Kubectl apply" translate="no">​</a></h4>
<p>Once you have defined your deployment and service configurations in the YAML file, the next step would be to apply them so Kubernetes can take the desired configuration and turn it into a running process(s). This is done using the aptly named apply command. For example, if applying the service YAML mentioned in the previous task, that would look like this:</p>
<p><code>kubectl apply -f example-deployment.yaml</code></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-get">Kubectl get<a href="#kubectl-get" class="hash-link" aria-label="Direct link to Kubectl get" title="Direct link to Kubectl get" translate="no">​</a></h4>
<p>Once both configurations have been applied, you&#x27;ll want to check the status of both to ensure things are running as expected. This would be done using the Kubectl get command. This is a very versatile command, and you will be using it a lot in your time with Kubernetes. The get command can be used to check the state of resources. The resource type will follow &#x27;get&#x27;, then <code>-n</code> or <code>--namespace</code> followed by the namespace (unless you are checking a cluster-level resource like a node). For example, to check the state of a deployment, you would use:</p>
<p><code>kubectl get pods -n example-namespace</code></p>
<p>The output for this command would look something like this:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Terminal</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">user@tryhackme$ kubectl get pods </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> example-namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME          READY   STATUS              RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example-pod   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running             </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          2m18s</span><br></span></code></pre></div></div>
<p>As mentioned, this command can be used to check on a variety of resources such as deployments, services, pods, and ReplicaSets.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-describe">Kubectl describe<a href="#kubectl-describe" class="hash-link" aria-label="Direct link to Kubectl describe" title="Direct link to Kubectl describe" translate="no">​</a></h4>
<p>This command can be used to show the details of a resource (or a group of resources). These details can help in troubleshooting or analysis situations. For example, say one of the pods in your cluster has started erroring out, and you want to get more information about the pod to try to determine why it has crashed. You would run the following command:</p>
<p><code>kubectl describe pod example-pod -n example-namespace</code></p>
<p>This would give you back some details about the erroring pod. For example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Terminal</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">user@tryhackme$ kubectl describe pod example-pod </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> example-namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:             example-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:        example-namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Priority:         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Service Account:  default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node:             minikube/192.168.49.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start Time:       Mon, </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> Jan </span><span class="token number" style="color:#36acaa">2024</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:01:14 +0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status:           Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:               </span><span class="token number" style="color:#36acaa">10.244</span><span class="token plain">.0.21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre></div></div>
<p>You can see here that the describe command details contain some &quot;events&quot;. These events can help shine a light on what the issue is. For more details surrounding this event, Kubernetes captures logs from each container in a running pod. These logs can be viewed using our next command.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-logs">Kubectl logs<a href="#kubectl-logs" class="hash-link" aria-label="Direct link to Kubectl logs" title="Direct link to Kubectl logs" translate="no">​</a></h4>
<p>Say you want to view the application logs of the erroring pods. Maybe you want to view the logs surrounding the event error. For this, we would use the kubectl logs command. Here is an example of how this would be used:</p>
<p><code>kubectl logs example-pod -n example-namespace</code></p>
<p>These logs can provide valuable insight not just for troubleshooting but for security analysis as well.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-exec">Kubectl exec<a href="#kubectl-exec" class="hash-link" aria-label="Direct link to Kubectl exec" title="Direct link to Kubectl exec" translate="no">​</a></h4>
<p>Now, let&#x27;s say the log information was helpful, but there are still some unanswered questions, and you want to dig deeper and access the container&#x27;s shell. The kubectl exec command will allow you to get inside a container and do this! If a pod has more than one container, you can specify a container using the <code>-c</code> or <code>--container</code> flag. The command for this is (the <code>-it</code> flag runs the command in interactive mode, everything after <code>--</code> will be run inside the container):</p>
<p><code>kubectl exec -it example-pod -n example-namespace -- sh</code></p>
<p>From here, you can run any command you want from within the container itself. Maybe you want to snoop around for your security analysis or run a command to test connectivity from the container.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubectl-port-forward">Kubectl port-forward<a href="#kubectl-port-forward" class="hash-link" aria-label="Direct link to Kubectl port-forward" title="Direct link to Kubectl port-forward" translate="no">​</a></h4>
<p>Another handy command is kubectl port-forward. This command allows you to create a secure tunnel between your local machine and a running pod in your cluster. An example of when this might be useful is when testing an application. Let&#x27;s imagine we have an nginx web application running across 3 pods which are exposed by a web application service. If you remember, a service makes a pod externally accessible. We take the port that is used to expose these pods and map it to one of our local ports. For example, matching the target port (the port the service is exposed on, which in our configuration example was 8080) to local port 8090 would make this web application accessible on our local machine at <code>http://localhost:8090</code>. The resources specified are <code>resource-type/resource-name</code>. This would be done using the kubectl port-forward command with the following syntax :</p>
<p><code>kubectl port-forward service/example-service 8090:8080</code></p>
<p>There are, of course, plenty more kubectl commands that can be used to navigate and interact with a Kubernetes cluster, but the ones covered give you a solid foundation, and you can perform some day-to-day DevSecOps tasks using only these. You will get a chance to demo these commands in this room&#x27;s practical exercise in Task 8.</p>
<p>Now complete these questions: What command would follow &#x27;kubectl&#x27; if you wanted to....</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> ...troubleshoot a pod by gathering some details about it? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describe</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> ...access the container&#x27;s shell? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">exec</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> ...check the status of running pods? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">get</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> ...turn a defined configuration (YAML file) into a running process? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apply</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-7-kubernetes--devsecops">Task 7 Kubernetes &amp; DevSecOps<a href="#task-7-kubernetes--devsecops" class="hash-link" aria-label="Direct link to Task 7 Kubernetes &amp; DevSecOps" title="Direct link to Task 7 Kubernetes &amp; DevSecOps" translate="no">​</a></h2>
<p>Okay, by now, you&#x27;re getting pretty familiar with Kubernetes; it&#x27;s becoming less of an acquaintance and more of a friend. You&#x27;ve learned the ins and outs of the tool and will soon get a chance to have a hands-on demo of it, but before any of that, let&#x27;s look at exactly how YOU would use this tool as a DevSecOps engineer. After all, that&#x27;s very likely why you&#x27;re here!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-and-security">Kubernetes and Security<a href="#kubernetes-and-security" class="hash-link" aria-label="Direct link to Kubernetes and Security" title="Direct link to Kubernetes and Security" translate="no">​</a></h3>
<p>Before we dive into what a DevSecOps engineer would be responsible for in a Kubernetes cluster, let&#x27;s consider Kubernetes from a security perspective to give some context. Kubernetes is, relatively speaking, new on the block. That is to say, it is an emerging technology. It&#x27;s emerging but very popular, with many companies adopting Kubernetes, especially young tech and start-up companies.</p>
<p>Introducing any tool into a system is considered an increased security risk as a new tool means a new potential way into that system. These risks are amplified when dealing with a tool like Kubernetes, where you have a network of pods that can communicate with each other. The default setting allows any pod to communicate with another. This implies all kinds of security considerations. As a DevSecOps engineer, it is your responsibility to ensure these channels are secure.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-hardening">Kubernetes Hardening<a href="#kubernetes-hardening" class="hash-link" aria-label="Direct link to Kubernetes Hardening" title="Direct link to Kubernetes Hardening" translate="no">​</a></h3>
<p>Container hardening is one way in which DevSecOps engineers can secure these channels, and we will dive into that later in this module with the <a href="https://tryhackme.com/room/containerhardening" target="_blank" rel="noopener noreferrer" class="">Container Hardening</a> room. It is the process of using container scanning tools to detect CVEs present in a cluster and remediate them to ensure minimal security breach risk.</p>
<p>Kubernetes hardening is precisely that, ensuring these channels are secure by fortifying your cluster following best container security practices that you would perform as a DevSecOps engineer. Various companies and government agencies have defined these best practices; let&#x27;s go over each area in which we can strengthen our container security and how this can be done.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="secure-your-pods">Secure your Pods<a href="#secure-your-pods" class="hash-link" aria-label="Direct link to Secure your Pods" title="Direct link to Secure your Pods" translate="no">​</a></h4>
<p>Let&#x27;s begin with a few ways to secure the pods themselves. Some best practices for pod security include:</p>
<ul>
<li class="">Containers that run applications should not have root privileges</li>
<li class="">Containers should have an immutable filesystem, meaning they cannot be altered or added to (depending on the purpose of the container, this may not be possible)</li>
<li class="">Container images should be frequently scanned for vulnerabilities or misconfigurations</li>
<li class="">Privileged containers should be prevented</li>
<li class=""><a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/" target="_blank" rel="noopener noreferrer" class="">Pod Security Standards</a> and <a href="https://kubernetes.io/docs/concepts/security/pod-security-admission/" target="_blank" rel="noopener noreferrer" class="">Pod Security Admission</a></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="hardening-and-separation-of-your-network">Hardening and Separation of your Network<a href="#hardening-and-separation-of-your-network" class="hash-link" aria-label="Direct link to Hardening and Separation of your Network" title="Direct link to Hardening and Separation of your Network" translate="no">​</a></h4>
<p>In the introduction to this task, one thing especially was flagged as a big security risk: communication. That communication happens over a network, and it&#x27;s your job as a DevSecOps engineer to ensure this communication is secure. This can be done using the following best practices:</p>
<ul>
<li class="">Access to the control plane node should be restricted using a firewall and role-based access control in an isolated network</li>
<li class="">Control plane components should communicate using Transport Layer Security (TLS) certificates</li>
<li class="">An explicit deny policy should be created</li>
<li class="">Credentials and sensitive information should not be stored as plain text in configuration files. Instead, they should be encrypted and in Kubernetes secrets</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-authentication-and-authorisation-optimally">Using Authentication and Authorisation Optimally<a href="#using-authentication-and-authorisation-optimally" class="hash-link" aria-label="Direct link to Using Authentication and Authorisation Optimally" title="Direct link to Using Authentication and Authorisation Optimally" translate="no">​</a></h4>
<p>It wouldn&#x27;t be a security lesson if we didn&#x27;t talk about authentication and authorisation, of course! Kubernetes is no different. Here are some best practices which can help make sure you are making efficient use of Kubernetes authentication and authorisation features:</p>
<ul>
<li class="">Anonymous access should be disabled</li>
<li class="">Strong user authentication should be used</li>
<li class="">RBAC policies should be created for the various teams using the cluster and the service accounts utilised</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="keeping-an-eye-out">Keeping an Eye Out<a href="#keeping-an-eye-out" class="hash-link" aria-label="Direct link to Keeping an Eye Out" title="Direct link to Keeping an Eye Out" translate="no">​</a></h4>
<p>You can&#x27;t rest easy knowing your Kubernetes cluster is secure if you don&#x27;t know what&#x27;s going on in your Kubernetes cluster. Here are some logging best practices to ensure you know exactly what is going on in your cluster and can detect threats when they appear:</p>
<ul>
<li class="">Audit logging should be enabled</li>
<li class="">A log monitoring and alerting system should be implemented</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="security-never-sleeps">Security Never Sleeps<a href="#security-never-sleeps" class="hash-link" aria-label="Direct link to Security Never Sleeps" title="Direct link to Security Never Sleeps" translate="no">​</a></h4>
<p>This is in no way an endorsement of a sleepless lifestyle; DevSecOps engineers do, in fact, need to sleep! Being secure is one thing, staying secure is another. Here are some best practices to ensure your cluster stays a safe haven:</p>
<ul>
<li class="">Security patches and updates should be applied quickly</li>
<li class="">Vulnerability scans and penetration tests should be done semi-regularly</li>
<li class="">Any obsolete components in the cluster should be removed</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-security-best-practices-in-action">Kubernetes Security Best Practices in Action<a href="#kubernetes-security-best-practices-in-action" class="hash-link" aria-label="Direct link to Kubernetes Security Best Practices in Action" title="Direct link to Kubernetes Security Best Practices in Action" translate="no">​</a></h3>
<p>The above information tells us there are <strong>a lot</strong> of ways to harden a Kubernetes infrastructure. There are so many, in fact, that breaking down each practice would turn this room into a self-published e-book. With the opportunity to get your hands on Kubernetes just a task away, let&#x27;s finish this one by breaking down just three of them.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="rbac">RBAC<a href="#rbac" class="hash-link" aria-label="Direct link to RBAC" title="Direct link to RBAC" translate="no">​</a></h4>
<p>RBAC (Role-Based Access Control) in Kubernetes regulates access to a Kubernetes cluster and its resources based on defined roles and permissions. These permissions (permission to create/delete x resource, etc.) are assigned to users, groups or service accounts. RBAC is a good way to ensure the resources in your cluster can only be accessed by those who <strong>need</strong> to access it. RBAC can be configured using a YAML file (same as defining a resource) where specific rules can be defined by declaring the resource type and verbs. Verbs are the actions being restricted, such as &#x27;create&#x27; and &#x27;get&#x27;.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="secrets-management">Secrets Management<a href="#secrets-management" class="hash-link" aria-label="Direct link to Secrets Management" title="Direct link to Secrets Management" translate="no">​</a></h4>
<p>A Kubernetes secret is an object used to store sensitive information (like credentials, OAuth tokens or SSH keys). Secrets are a good way to ensure that sensitive data isn&#x27;t leaked and allow for more control over how this information is used. Secrets are stored as a base64 encoded string, unencrypted by default. For security, it is best to configure encryption at rest. Another way to promote secure secrets management in your Kubernetes cluster is to configure the least privilege access to secrets using RBAC.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="psa-pod-security-admission-and-pss-pod-security-standards">PSA (Pod Security Admission) and PSS (Pod Security Standards)<a href="#psa-pod-security-admission-and-pss-pod-security-standards" class="hash-link" aria-label="Direct link to PSA (Pod Security Admission) and PSS (Pod Security Standards)" title="Direct link to PSA (Pod Security Admission) and PSS (Pod Security Standards)" translate="no">​</a></h4>
<p>Pod Security Standards are used to define security policies at 3 levels (privileged, baseline and restricted) at a namespace or cluster-wide level. What these levels mean:</p>
<ul>
<li class="">Privileged: This is a near unrestricted policy (allows for known privilege escalations)</li>
<li class="">Baseline: This is a minimally restricted policy and will prevent known privilege escalations (allows deployment of pods with default configuration)</li>
<li class="">Restricted: This heavily restricted policy follows the current pod hardening best practices</li>
</ul>
<p>Pod Security Admission (using a Pod Security Admission controller) enforces these Pod Security Standards by intercepting API server requests and applying these policies.</p>
<p><strong>Note</strong>: Previously, the roles of PSA and PSS were fulfilled using PSPs (Pod Security Policies); however, as of Kubernetes v1.25, these have been removed. Just to save any confusion if you stumble across PSPs doing some extracurricular Kubernetes security study!</p>
<p>As you can see, a lot goes into fortifying a Kubernetes cluster and plenty to keep a DevSecOps engineer busy. These are some of the best practices involved in Kubernetes hardening. DevSecOps engineers, while following these practices and utilising techniques such as automated security checks, can ensure their Kubernetes environment is safeguarded against cyber threats.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Which best container security practice is used to regulate access to a Kubernetes cluster and its resources? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RBAC</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What is used to define security policies at 3 levels? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pod Security Standards</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What enforces these policies? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pod Security Admission</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What Kubernetes object can be used to store sensitive information and should, therefore, be managed securely? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Secret</span><br></span></code></pre></div></div></div></div></details></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-8-hands-on-with-kubernetes">Task 8 Hands-on with Kubernetes<a href="#task-8-hands-on-with-kubernetes" class="hash-link" aria-label="Direct link to Task 8 Hands-on with Kubernetes" title="Direct link to Task 8 Hands-on with Kubernetes" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started" translate="no">​</a></h3>
<p>Press the green Start Machine button located at the top-right of this task. The machine will start in split-view. In case it is not showing up, you can press the blue Show Split View button at the top-right of the page.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="phase-one-explore">Phase One: Explore<a href="#phase-one-explore" class="hash-link" aria-label="Direct link to Phase One: Explore" title="Direct link to Phase One: Explore" translate="no">​</a></h3>
<p>Okay, let&#x27;s get going, shall we? The first thing we want to do is start our Minikube cluster. You can do this by running the following command in the terminal (the cluster will take a couple of minutes to start up):</p>
<p><code>minikube start</code></p>
<p>Once the cluster has started up, you&#x27;re ready to go! This guided walkthrough will take you through this cluster, reinforcing knowledge taught in the room. That being said, you have a Kubernetes cluster at your disposal, so feel free to explore the cluster and experiment with the different commands you have learned so far!</p>
<p>Let&#x27;s see what&#x27;s running already, shall we? We can do this using the following command (<code>-A</code> for all namespaces)</p>
<p><code>kubectl get pods -A</code></p>
<p>After running this, you should see a few pods running. These are the default pods present when you first start a Kubernetes cluster (you may recognise some of these names as they represent some of the control plane and worker node processes). Exciting stuff! But how about we make it more exciting by adding a deployment and service into the mix? On the VM you will be able to find some config YAML files located here:</p>
<p><code>~/Desktop/configuration</code></p>
<p>There are two config YAMLs here of interest to us: <code>nginx-deployment.yaml</code> and <code>nginx-service.yaml</code>. Check these configuration files out using the cat command:</p>
<p><code>cat filename</code></p>
<p>Let&#x27;s break down what we see in each of these files:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="nginx-deploymentyaml">nginx-deployment.yaml<a href="#nginx-deploymentyaml" class="hash-link" aria-label="Direct link to nginx-deployment.yaml" title="Direct link to nginx-deployment.yaml" translate="no">​</a></h4>
<p>This is a relatively simple deployment; we can see the desired state has been defined as a single replica pod, inside of which will be a container running an nginx image. From the other lines, we can determine that this pod will be used to run some kind of web app.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="nginx-serviceyaml">nginx-service.yaml<a href="#nginx-serviceyaml" class="hash-link" aria-label="Direct link to nginx-service.yaml" title="Direct link to nginx-service.yaml" translate="no">​</a></h4>
<p>This, again, is a straightforward nginx NodePort service being defined here. The eagle-eyed among you may have noticed that the &#x27;selector: -&gt; app: &#x27; field matches the app label defined in the deployment, as well as the &#x27;targetPort&#x27; matching the &#x27;containerPort&#x27; outlined in the deployment. This service exposes the web application running in the pod, which the deployment controls. To apply the configuration outlined in these YAML files, we use the kubectl apply command. Remember to apply the service file first! Like so:</p>
<p><code>kubectl apply -f nginx-service.yaml</code></p>
<p><code>kubectl apply -f nginx-deployment.yaml</code></p>
<p>Verify the replica pod is running by using the following command (not providing any namespace flag will get all the pods in the default namespace, which is where our pod should be):</p>
<p><code>kubectl get pods -A</code></p>
<p>You should now see a pod with &#x27;nginx-deployment&#x27; in its name! Our deployment has been started!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="phase-two-interact">Phase Two: Interact<a href="#phase-two-interact" class="hash-link" aria-label="Direct link to Phase Two: Interact" title="Direct link to Phase Two: Interact" translate="no">​</a></h3>
<p>Okay, now we have a web application running in a pod, which is being exposed by a service. If you recall the nginx-service.yaml, the service connects to the web application using the target port of port 80 (the port where the container is exposed). However, the service&#x27;s port itself is set to 8080. We want to access this service. We will do this by using the kubectl port-forward command, which allows us to forward a port on our localhost to the Kubernetes service port (8080). Here is the full command to do so:</p>
<p><code>kubectl port-forward service/nginx-service 8090:8080</code></p>
<p>After running this command, open a web browser (Firefox) and access the web application at the following address:</p>
<p><code>http://localhost:8090/</code></p>
<p>Looks like a simple login terminal, but it needs credentials. Why don&#x27;t we see if there are any Kubernetes secrets on the cluster that can help us log in to the terminal? Open another terminal window (so the previous window continues to port-forward) and run the following command to see if there are any secrets (in the default namespace):</p>
<p><code>kubectl get secrets</code></p>
<p>Ahh, there is! &quot;terminal-creds&quot; sounds like we are onto a winner! Using the kubectl describe command, we can get more details on this secret to see what is being stored here:</p>
<p><code>kubectl describe secret terminal-creds</code></p>
<p>In the description, we can see that two pieces of &quot;Data&quot; are being stored: a username and a password. While Kubernetes secrets <strong>are</strong> stored in plaintext and not encrypted by default, they are base64 encoded, so we pipe this command and base64 decode the output to get it in plain text. To access this data, we can use the following command:</p>
<p>To get the username, run:</p>
<p><code>kubectl get secret terminal-creds -o jsonpath=&#x27;{.data.username}&#x27;| base64 --decode</code></p>
<p>To get the password, run:</p>
<p><code>kubectl get secret terminal-creds -o jsonpath=&#x27;{.data.password}&#x27;| base64 --decode</code></p>
<p>Use these credentials to access the login terminal. That&#x27;s a bingo! We&#x27;re in, and you have retrieved the flag!</p>
<p><strong>Bonus Task</strong>: For those curious enough, you can use an alternate method to get this flag. It will require some Kubernetes investigation on your part, but the first breadcrumb lies in the nginx-deployment.yaml!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="phase-three-secure">Phase Three: Secure<a href="#phase-three-secure" class="hash-link" aria-label="Direct link to Phase Three: Secure" title="Direct link to Phase Three: Secure" translate="no">​</a></h3>
<p>It&#x27;s great that we could access the terminal using the credentials stored in the Kubernetes secret, but as a DevSecOps engineer, this is where our alarm bells should be going off. Time for us to get to work with some Kubernetes secret management. With these credentials being sensitive information, we want to restrict access to the Kubernetes secret they are stored in. We can do this by configuring RBAC (Role-Based Access Control).</p>
<p>First things first, let&#x27;s decide who it is we want to be able to access this secret. Your DevSecOps manager has suggested that you restrict access to a service account, which is essentially an identity a pod can assume to interact with the Kubernetes API/cluster. By doing this, we can maybe even set it up so that in the future, our daily terminal tasks can be run by an application in a pod. Let&#x27;s use the kubectl create serviceaccount (can be abbreviated to &#x27;sa&#x27;) command to make two service accounts, the &#x27;terminal-user&#x27; for non-admin terminal activities (should not have access to secret) and the &#x27;terminal-admin&#x27; for admin terminal activities (should have access to secret). Run these two commands to make those service accounts:</p>
<p><code>kubectl create sa terminal-user</code></p>
<p><code>kubectl create sa terminal-admin</code></p>
<p>With those service accounts created, it&#x27;s time to restrict access to the &#x27;terminal-creds&#x27; secret so that only the &#x27;terminal-admin&#x27; service account can access it. We are going to do this by defining and applying two configurations. First of all, a Role YAML that defines the role and what it can do (get the &#x27;terminal-creds&#x27; secret). Then, a Role Binding YAML that binds the role we have defined to the &#x27;terminal admin&#x27; service account. Navigate to the following directory and cat the two YAMLs to examine how these are defined:</p>
<p><code>~/Desktop/configuration/rbac</code></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="roleyaml">role.yaml<a href="#roleyaml" class="hash-link" aria-label="Direct link to role.yaml" title="Direct link to role.yaml" translate="no">​</a></h4>
<p>Here, you can see we define a role named &quot;secret-admin&quot;. In the rules section, we define what it is this role can do. We define the resource (secrets), what verbs are being restricted (we are restricting the &#x27;get&#x27; verb, but you could restrict others) and finally, the name of our secret (terminal-creds).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="role-bindingyaml">role-binding.yaml<a href="#role-bindingyaml" class="hash-link" aria-label="Direct link to role-binding.yaml" title="Direct link to role-binding.yaml" translate="no">​</a></h4>
<p>In this YAML, we bind the &#x27;terminal-admin&#x27; service account (in the &#x27;subjects&#x27; section) with the &#x27;secret-admin&#x27; role defined above (in the roleRef section).</p>
<p>Lets now apply these configurations the same way we applied the deployment and service (using kubectl apply):</p>
<p><code>kubectl apply -f role.yaml</code></p>
<p><code>kubectl apply -f role-binding.yaml</code></p>
<p>You have now configured RBAC for this Kubernetes secret! The only thing left to do is test whether our RBAC is working. We can do this using the kubectl auth command, which tells us if a service account has sufficient permission to perform a specific action. Let us first verify that the regular &#x27;terminal-user&#x27; service account CAN NOT access the secret:</p>
<p><code>kubectl auth can-i get secret/terminal-creds --as=system:serviceaccount:default:terminal-user</code></p>
<p>It looks like we expected. This &quot;no&quot; response confirms that this service account can no longer access the terminal-creds secret. Now, finally, let us verify that our &#x27;terminal-admin&#x27; service account CAN access it:</p>
<p><code>kubectl auth can-i get secret/terminal-creds --as=system:serviceaccount:default:terminal-admin</code></p>
<p>With this &quot;yes&quot; output, you have confirmed RBAC is in place and fulfilled your duty as a DevSecOps engineer, fortifying the cluster and taking a good first step into hardening this cluster. Hope you&#x27;ve enjoyed taking a little tour around this Kubernetes cluster and getting to know the basics. Until next time!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Answer the questions below</div><div class="admonitionContent_BuS1"><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Can you master the basics of Kubernetes and retrieve the flag? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">THM{k8s_k3nno1ssarus}</span><br></span></code></pre></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> What apiVersion is used for the RoleBinding? </summary><div><div class="collapsibleContent_i85q"><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rbac.authorization.k8s.io/v1</span><br></span></code></pre></div></div></div></div></details></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/TryHackMyOffsecBox/TryHackMe-CN/tree/main/packages/create-docusaurus/templates/shared/docs/Modules/Container Security/Intro to Kubernetes.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/TryHackMe-CN/en/docs/Modules/Container Security/Intro to Docker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro to Docker</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/TryHackMe-CN/en/docs/Modules/Container Security/Container Vulnerabilities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Container Vulnerabilities</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#task-1-introduction" class="table-of-contents__link toc-highlight">Task 1 Introduction</a><ul><li><a href="#learning-prerequisites" class="table-of-contents__link toc-highlight">Learning Prerequisites</a></li><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li></ul></li><li><a href="#task-2-kubernetes-101" class="table-of-contents__link toc-highlight">Task 2 Kubernetes 101</a><ul><li><a href="#a-new-dawn" class="table-of-contents__link toc-highlight">A New Dawn</a></li><li><a href="#enter-kubernetes" class="table-of-contents__link toc-highlight">Enter Kubernetes</a></li><li><a href="#the-many-benefits-of-kubernetes" class="table-of-contents__link toc-highlight">The Many Benefits of Kubernetes</a></li></ul></li><li><a href="#task-3-kubernetes-architecture" class="table-of-contents__link toc-highlight">Task 3 Kubernetes Architecture</a><ul><li><a href="#cluster-architecture" class="table-of-contents__link toc-highlight">Cluster Architecture</a></li><li><a href="#the-kubernetes-control-plane" class="table-of-contents__link toc-highlight">The Kubernetes Control Plane</a></li><li><a href="#kubernetes-worker-node" class="table-of-contents__link toc-highlight">Kubernetes Worker Node</a></li><li><a href="#communication-between-components" class="table-of-contents__link toc-highlight">Communication Between Components</a></li></ul></li><li><a href="#task-4-kubernetes-landscape" class="table-of-contents__link toc-highlight">Task 4 Kubernetes Landscape</a><ul><li><a href="#the-lay-of-the-land" class="table-of-contents__link toc-highlight">The Lay of the Land</a></li><li><a href="#devops-vs-devsecops-in-k8s" class="table-of-contents__link toc-highlight">DevOps vs. DevSecOps in K8s</a></li></ul></li><li><a href="#task-5-kubernetes-configuration" class="table-of-contents__link toc-highlight">Task 5 Kubernetes Configuration</a><ul><li><a href="#time-to-configure" class="table-of-contents__link toc-highlight">Time to Configure</a></li></ul></li><li><a href="#task-6-kubectl" class="table-of-contents__link toc-highlight">Task 6 Kubectl</a><ul><li><a href="#kubectl-to-the-rescue" class="table-of-contents__link toc-highlight">Kubectl to the Rescue</a></li></ul></li><li><a href="#task-7-kubernetes--devsecops" class="table-of-contents__link toc-highlight">Task 7 Kubernetes &amp; DevSecOps</a><ul><li><a href="#kubernetes-and-security" class="table-of-contents__link toc-highlight">Kubernetes and Security</a></li><li><a href="#kubernetes-hardening" class="table-of-contents__link toc-highlight">Kubernetes Hardening</a></li><li><a href="#kubernetes-security-best-practices-in-action" class="table-of-contents__link toc-highlight">Kubernetes Security Best Practices in Action</a></li></ul></li><li><a href="#task-8-hands-on-with-kubernetes" class="table-of-contents__link toc-highlight">Task 8 Hands-on with Kubernetes</a><ul><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#phase-one-explore" class="table-of-contents__link toc-highlight">Phase One: Explore</a></li><li><a href="#phase-two-interact" class="table-of-contents__link toc-highlight">Phase Two: Interact</a></li><li><a href="#phase-three-secure" class="table-of-contents__link toc-highlight">Phase Three: Secure</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/TryHackMe-CN/en/docs">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/TryHackMyOffsecBox" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github - TryHackMyOffsecBox<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/CRONUS-Security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github - CRONUS-Security<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 TryHackMyOffsecBox. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>